"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7997],{67997:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var i=a(27565),l=a(17295),n=a(79742),d=a(15335),o=a(79663);const s={initialState:{name:"",path:"",method:"",description:""},formFields:[{id:"name",lable:"Name ",Field_Name:"Name",fieldType:d.Q.INPUT,dataField:"name",fieldSetting:{placeholder:"Enter Name",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-12 col-xl-12 col-md-12 col-12 mb-2 "}},{id:"path",lable:"Path",Field_Name:"Path",fieldType:d.Q.INPUT,dataField:"path",fieldSetting:{placeholder:"Enter Path",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-12 col-xl-12 col-md-12 col-12 mb-2"}},{id:"method",lable:"Method ",Field_Name:"Method",fieldType:d.Q.SELECT,dataField:"method",fieldSetting:{placeholder:"Select Method",isEnableOnChange:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-12 col-xl-12 col-md-12 col-12 mb-2"}},{id:"description",lable:"Description",Field_Name:"Description",fieldType:d.Q.TEXTAREA,dataField:"description",fieldSetting:{placeholder:"Enter Description",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-12 col-xl-12 col-md-12 col-12 mb-2"}}],formSetting:{isViewOnly:!1}},r={columns:[{name:"End Point Name",fieldName:"endpointName",colStyle:{width:"20%"},allowShort:!0},{name:"End Point Path",fieldName:"path",colStyle:{width:"25%"},allowShort:!0},{name:"End Point Method",fieldName:"method",colStyle:{width:"20%"},allowShort:!0},{name:"Description",fieldName:"description",colStyle:{width:"20%"},allowShort:!0},{name:"Action",colStyle:{width:"15%"},colType:o.f.ACTION,defaultAction:{allowEdit:!0,allowDelete:!0},customAction:[{name:"ADDPARAMETERS",iconName:"ci:list-add",title:"Add Parameter",className:"addparameter-icon"}]}]};var c=a(65748),u=a(18637),m=a(60497),p=a(32813),f=a(28734),h=a(82915),g=a(27929);const S=e=>{const t=(0,i.useRef)(),a=e.initData.endpointId,[l,{isFetching:n,isSuccess:d,data:o}]=(0,h.ou)(),[r,S]=(0,i.useState)(s),[x,{isLoading:y,isSuccess:C,data:T}]=(0,h.bs)();(0,i.useEffect)((()=>{if(d&&o&&!n){const e={...r};e.initialState={endpointId:o.endpointId,providerId:o.providerId,name:o.endpointName,path:o.path,method:o.method,description:o.description},S(e)}}),[d,o,n]),(0,i.useEffect)((()=>{a&&e.isEdit&&l(a)}),[a,e.isEdit]),(0,i.useEffect)((()=>{if(C&&T){if(T.errorMessage.includes("exists"))return void c.A.warning(T.errorMessage);e.onSuccess(),c.A.success(T.errorMessage),b(),e.onClose()}}),[C,T]),(0,i.useEffect)((()=>{if(e.isModelOpen&&!e.isEdit){let e={...s};(0,p.t)(e,S,null)}}),[e.isModelOpen]);const b=()=>{let t={...s};(0,p.t)(t,S,null),e.onClose()};(0,i.useEffect)((()=>{s.formFields.find((e=>"method"===e.dataField)).fieldSetting.options=Object.entries(f.wn).map((e=>{let[t,a]=e;return{label:a,value:t}}))}),[]);return(0,g.jsx)("div",{children:(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-md-12",children:(0,g.jsx)("div",{className:"row vertical-form",children:(0,g.jsx)(u.A,{ref:t,config:r,...r})})}),(0,g.jsx)("div",{className:"col-md-12 mt-2",children:(0,g.jsxs)("div",{className:"d-flex align-item-center justify-content-end",children:[(0,g.jsx)(m.A,{buttonTypeClassName:"theme-button",buttonText:e.isEdit?"Update":"Save",onClick:()=>{const i=t.current.getFormData();if(i&&!a){let t={...i,providerId:e.providerId,method:i.method.value};x(t)}else if(i&&a){let t={...i,endpointId:a,method:i.method&&"object"===typeof i.method?i.method.value:i.method,providerId:e.providerId};x(t)}},isLoading:y}),(0,g.jsx)(m.A,{buttonTypeClassName:"dark-btn ml-5",buttonText:"Cancel",onClick:b})]})})]})})};var x=a(80889),y=a(69885);const C={initialState:{name:"",dataType:"",defaultValue:"",isRequired:""},formFields:[{id:"name",lable:"Name ",Field_Name:"Name",fieldType:d.Q.INPUT,dataField:"name",fieldSetting:{placeholder:"Enter Name",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-16 col-xl-6 col-md-6 col-6 mb-2 "}},{id:"dataType",lable:"DataType ",Field_Name:"DataType",fieldType:d.Q.SELECT,dataField:"dataType",fieldSetting:{placeholder:"Select DataType",isEnableOnChange:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-6 col-md-6 col-6 mb-2"}},{id:"defaultValue",lable:"Default Value",Field_Name:"Default Value",fieldType:d.Q.INPUT,dataField:"defaultValue",fieldSetting:{placeholder:"Enter Default Value",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-6 col-md-6 col-6 mb-2"}},{id:"isRequired",lable:"Is Required",Field_Name:"Is Required",fieldType:d.Q.CHECKBOX,dataField:"isRequired",fieldSetting:{placeholder:""},style:{containerCss:"col-xxl-6 col-xl-6 col-md-6 col-6 col-6 mb-input margin-left-checkbox mt-3"}}],formSetting:{isViewOnly:!1}},T={columns:[{name:"Parameter Name",fieldName:"name",colStyle:{width:"20%"},allowShort:!0},{name:"Data Type ",fieldName:"dataType",colStyle:{width:"20%"},allowShort:!0},{name:"Default Value ",fieldName:"defaultValue",colStyle:{width:"20%"},allowShort:!0},{name:"Is Required",fieldName:"isRequired",colStyle:{width:"20%"},colType:o.f.CHECKBOX,colSettings:{allowCheckbox:!0,allowDisable:!0}},{name:"Action",colStyle:{width:"20%"},colType:o.f.ACTION,defaultAction:{allowEdit:!0,allowDelete:!0}}]};var b=a(76705),E=a(62360);const N=e=>{const t=(0,i.useRef)(),[a,l]=(0,i.useState)(),n=(0,i.useRef)(),[d,o]=(0,i.useState)(),[s,r]=(0,i.useState)(0),{confirm:h}=(0,x.A)(),[S,y]=(0,i.useState)(C),[N,{isFetching:I,isSuccess:v,data:j}]=(0,b.IG)(),[w,{isLoading:A,isSuccess:D,data:P}]=(0,b.BP)(),[F,{isSuccess:R,data:O}]=(0,b.hL)(),[q,{isLoading:k,isSuccess:M,data:L}]=(0,b.bW)();(0,i.useEffect)((()=>{if(!I&&v&&j){const e={...S};e.initialState={endpointId:j.endpointId,parameterId:j.parameterId,name:j.name,dataType:j.dataType,defaultValue:j.defaultValue,isRequired:j.isRequired},y(e),l(j.parameterId)}}),[I,v,j]),(0,i.useEffect)((()=>{a&&e.isEdit&&N(a)}),[a,e.isEdit]),(0,i.useEffect)((()=>{M&&L&&((0,p.t)(C,y,null),Q(),c.A.success(L.errorMessage))}),[M,L]);(0,i.useEffect)((()=>{C.formFields.find((e=>"dataType"===e.dataField)).fieldSetting.options=Object.entries(f.iw).map((e=>{let[t,a]=e;return{label:t,value:a}}))}),[]);(0,i.useEffect)((()=>{if(R&&O){c.A.success(O.errorMessage);const e=n.current.getCurrentPageObject();V(e,n.current.generateSortingString())}}),[R,O]);const V=(t,a)=>{const i={pagination:{pageNumber:t.pageNumber,pageSize:t.pageSize},filters:{searchText:""},sortString:a,endpointId:e.initData.endpointId};w(i)},Q=()=>{if(n.current){const e=n.current.getCurrentPageObject();V(e,n.current.generateSortingString())}};(0,i.useEffect)((()=>{Q()}),[e.initData.endpointId]),(0,i.useEffect)((()=>{D&&P&&(P&&o(P.dataSource),P.totalRecord&&r(P.totalRecord))}),[D,P]);const _={EDIT:e=>{N(e.parameterId)},DELETE:e=>{h("Delete?","Are you sure you want to Delete?","Delete","Cancel").then((t=>{t&&F(e.parameterId)}))}};return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-md-12 mt-2",children:(0,g.jsx)("div",{className:"row vertical-form",children:(0,g.jsx)(u.A,{ref:t,config:S,...S})})}),(0,g.jsx)("div",{className:"col-md-12 mt-2",children:(0,g.jsxs)("div",{className:"d-flex align-item-center justify-content-end mb-2",children:[(0,g.jsx)(m.A,{buttonTypeClassName:"theme-button",buttonText:e.isEdit?"Update":"Save",onClick:()=>{const i=t.current.getFormData();if(i&&!a){let t={...i,endpointId:e.initData.endpointId,dataType:i.dataType.value};q(t)}else if(i&&a){let t={...i,parameterId:a,endpointId:e.initData.endpointId,dataType:i.dataType&&"object"===typeof i.dataType?i.dataType.value:i.dataType,isRequired:i.isRequired};q(t)}},isLoading:k}),(0,g.jsx)(m.A,{buttonTypeClassName:"dark-btn ml-5",buttonText:"Cancel",onClick:()=>{(0,p.t)(C,y,null),e.onClose()}})]})})]}),(0,g.jsx)("div",{className:"row",children:(0,g.jsx)("div",{className:"col-md-12 table-striped api-provider",children:(0,g.jsx)(E.A,{ref:n,configuration:T,dataSource:d,allowPagination:!1,pagination:{totalCount:s,pageSize:20,currentPage:1},onPageChange:e=>{V(e)},onSorting:e=>{V(n.current.getCurrentPageObject(),e)},isLoading:A,onActionChange:_})})})]})})};let I={};const v=e=>{let{handleEditClick:t,childRef:a,providerId:l,initData:d}=e;const o=(0,i.useRef)(),s=d.endpointId,[u,m]=(0,i.useState)(),[p,f]=(0,i.useState)(0),{confirm:S}=(0,x.A)(),[C,T]=(0,i.useState)(!1),[b,{isLoading:v,isSuccess:j,data:w}]=(0,h.z5)(),[A,{isSuccess:D,data:P}]=(0,h.DY)();(0,i.useEffect)((()=>{if(D&&P){c.A.success(P.errorMessage);const e=o.current.getCurrentPageObject();F(e,o.current.generateSortingString())}}),[D,P]),(0,i.useEffect)((()=>{j&&w&&(w&&m(w.dataSource),w.totalRecord&&f(w.totalRecord))}),[j,w]);const F=(e,t)=>{const a={pagination:{pageNumber:e.pageNumber,pageSize:e.pageSize},filters:{searchText:""},sortString:t,providerId:l};b(a)},R=()=>{if(o.current){const e=o.current.getCurrentPageObject();F(e,o.current.generateSortingString())}};(0,i.useEffect)((()=>{R()}),[]);(0,i.useImperativeHandle)(a,(()=>({callChildFunction:R})));const O=()=>{T(!1)},q={ADDPARAMETERS:e=>{I={...e},T(!C)},EDIT:t,DELETE:e=>{S("Delete?","Are you sure you want to Delete?","Delete","Cancel").then((t=>{t&&A(e.endpointId)}))}};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"row",children:(0,g.jsx)("div",{className:"col-md-12 table-striped api-provider api-management",children:(0,g.jsx)(E.A,{ref:o,configuration:r,dataSource:u,allowPagination:!1,pagination:{totalCount:p,pageSize:20,currentPage:1},onPageChange:e=>{F(e,o.current.generateSortingString())},onSorting:e=>{F(o.current.getCurrentPageObject(),e)},isLoading:v,onActionChange:q})})}),(0,g.jsx)(n.default,{modalTitle:"Api Parameter",contentClass:"content-60",onClose:O,modalTitleIcon:y.m.AddIcon,isOpen:C,children:(0,g.jsx)(N,{initData:I,onClose:O,onSuccess:()=>{T(!0),a.current&&a.current.callChildFunction()},endpointId:s})})]})},j=e=>{let{providerId:t}=e;const a=(0,i.useRef)(),[d,o]=(0,i.useState)(!1),[r,c]=(0,i.useState)(!1),[u,m]=(0,i.useState)(s),f=()=>{o(!1),c(!1)};return(0,g.jsxs)("div",{children:[(0,g.jsx)(l.default,{cardTitle:"API EndPoints",buttonClassName:"btn theme-button",rightButton:!0,buttonText:"Add",textWithIcon:!0,iconImg:y.m.PlusIcon,titleButtonClick:()=>{(0,p.t)(s,m,null),o(!0)},children:(0,g.jsx)(v,{providerId:t,initData:u,childRef:a,handleEditClick:e=>{(0,p.t)(s,m,null),o(!0),m(e),c(!0)}})}),(0,g.jsx)(n.default,{modalTitle:r?"Update Api EndPoints":"Add Api EndPoints",contentClass:"content-35",onClose:f,modalTitleIcon:y.m.AddIcon,isOpen:d,children:(0,g.jsx)(S,{isEdit:r,providerId:t,initData:u,onClose:f,onSuccess:()=>{o(!0),a.current&&a.current.callChildFunction()},isModelOpen:d})})]})}}}]);
//# sourceMappingURL=7997.917c330f.chunk.js.map