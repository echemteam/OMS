"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9295],{49295:(e,d,i)=>{i.r(d),i.d(d,{default:()=>g});var s=i(27565),t=i(60497),r=i(28734),a=i(18637),n=i(32813),l=i(15889),c=i(58412),p=i(24014),I=i(65748),u=i(4260),o=i(71509),f=i(27929);const y={label:"United States",value:233},g=(0,s.forwardRef)((e=>{let{keyId:d,isSupplier:i,updateAddress:g,addAddress:S,getAddresssById:m,isModelOpen:h,editMode:A,isButtonDisable:T,getCompletionCount:L,onSidebarClose:B,editRef:E,isOrderManage:F,getAddressTypeIdOrder:P,onHandleOrderInfoRepeatCall:C,orderCustomerId:D,isEditablePage:z,customerStatusId:b}=e;const v=(0,s.useRef)(),[V,N]=(0,s.useState)(p.z),[k,G]=(0,s.useState)(!1),[j,x]=(0,s.useState)(null),[M,w]=(0,s.useState)(null),[X,H]=(0,s.useState)(0),[R,{isLoading:U,isSuccess:O,data:_}]=S(),[q,{isLoading:K,isSuccess:Y,data:J}]=g(),[Q,{isFetching:W,isSuccess:Z,data:$}]=m(),[ee,{isSuccess:de,isFetching:ie,data:se}]=(0,o.sM)(),[te,{data:re}]=(0,o.dq)(),[ae,{isSuccess:ne,data:le}]=(0,u.f8)(),[ce,{isSuccess:pe,data:Ie}]=(0,o.Yj)();(0,s.useEffect)((()=>{(async()=>{(A||h||!F)&&await Promise.all([te(),ae(),ce()])})()}),[A,h]),(0,s.useEffect)((()=>{if(F){(0,c.t5)(p.z,"addressTypeId",r.fV.DISABLED,!0);let e={...p.z};P===r.RX.BILLING?e=(0,l.G)(p.z,["isShippingAndBilling","isPreferredShipping"]):P===r.RX.SHIPPING&&(e=(0,l.G)(p.z,["isShippingAndBilling","isPreferredBilling"])),e.initialState={...e.initialState,addressTypeId:P},N(e)}else(0,c.t5)(p.z,"addressTypeId",r.fV.DISABLED)}),[F,h]);const ue=(e,d)=>{e&&d&&oe(e,d)};(0,s.useEffect)((()=>{ue(O,_)}),[O,_]),(0,s.useEffect)((()=>{ue(Y,J)}),[Y,J]),(0,s.useEffect)((()=>{i&&h?((0,c.t5)(V,"cityId",r.fV.DISABLED,!0),(0,c.t5)(V,"addressTypeId",r.fV.MULTISELECT,!0),A&&(0,c.t5)(V,"addressTypeId",r.fV.MULTISELECT,!1)):h||F?i||F||(0,c.t5)(V,"addressTypeId",r.fV.MULTISELECT,!1):(0,n.t)(p.z,N,null)}),[i,h]),(0,s.useEffect)((()=>{ne&&le&&(0,c.Xh)(le,"countryId","name",p.z,"countryId")}),[ne,le]),(0,s.useEffect)((()=>{if(!ie&de&&se){var e;const d=se.map((e=>({value:e.cityId,label:e.name})));let i={...V};const s=null===i||void 0===i||null===(e=i.formFields)||void 0===e?void 0:e.find((e=>"cityId"===e.id));s.fieldSetting.options=d,N(i)}}),[de,se,ie]),(0,s.useEffect)((()=>{if(pe&&Ie){const e=e=>i?e.isForSuppliers:e.isForCustomers;(0,c.Xh)(Ie,"addressTypeId","type",p.z,"addressTypeId",e),G((e=>!e))}}),[pe,Ie,i]),(0,s.useEffect)((()=>{if(!W&&Z&&$){H($.addressId);let e={...V},s=$;T?T&&((0,c.t5)(V,"cityId",r.fV.DISABLED,!0),(0,c.t5)(V,"stateId",r.fV.DISABLED,!0)):((0,c.t5)(V,"cityId",r.fV.DISABLED),(0,c.t5)(V,"stateId",r.fV.DISABLED)),s.countryId&&(0,c.Xh)(re,"stateId","name",e,"stateId",(e=>e.countryId===s.countryId)),s.stateId&&ee(s.stateId),e.initialState={customerId:!1===i?d:0,supplierId:!0===i?d:0,addressTypeId:s.addressTypeId,addressLine1:s.addressLine1,addressLine2:s.addressLine2,addressLine3:s.addressLine3,addressLine4:s.addressLine4,addressLine5:s.addressLine5,countryId:s.countryId,stateId:s.stateId,cityId:s.cityId,zipCode:s.zipCode,isPreferredShipping:s.isPreferredShipping,isPreferredBilling:s.isPreferredBilling},N(e)}}),[W,Z,$]);(0,s.useEffect)((()=>{F||(()=>{if(!A){let e;e=(0,l.G)(p.z,["isPreferredShipping","isShippingAndBilling","isPreferredBilling"]),re&&(Se(y,"countryId"),(0,c.t5)(V,"cityId",r.fV.DISABLED,!0)),N(e)}})()}),[re,h]),(0,s.useEffect)((()=>{if($){let e={...V};"Billing"===$.type?e=(0,l.G)(p.z,["isShippingAndBilling","isPreferredShipping"]):"Shipping"===$.type?e=(0,l.G)(p.z,["isShippingAndBilling","isPreferredBilling"]):"AP"!==$.type&&"Primary"!==$.type||(e=(0,l.G)(p.z,["isShippingAndBilling","isPreferredBilling","isPreferredShipping"])),e.initialState={customerId:!1===i?d:0,supplierId:!0===i?d:0,addressTypeId:$.addressTypeId,addressLine1:$.addressLine1,addressLine2:$.addressLine2,addressLine3:$.addressLine3,addressLine4:$.addressLine4,addressLine5:$.addressLine5,countryId:$.countryId,stateId:$.stateId,cityId:$.cityId,zipCode:$.zipCode,isPreferredShipping:$.isPreferredShipping,isPreferredBilling:$.isPreferredBilling},N(e)}}),[$]);const oe=(e,i)=>{if(e&&i){if(L&&L(),i.errorMessage.includes("exists"))return I.A.warning(i.errorMessage),void Q(d);(0,n.t)(p.z,N,null),I.A.success(i.errorMessage),F?C():(Q(d),B()),B()}},fe=(e,d,i,s)=>{const t=((e,d,i)=>d?i?e.addressTypeId&&"object"===typeof e.addressTypeId?String(e.addressTypeId.value):String(e.addressTypeId):Array.isArray(e.addressTypeId)?e.addressTypeId.map(String).join(","):e.addressTypeId:e.addressTypeId&&"object"===typeof e.addressTypeId?String(e.addressTypeId.value):String(e.addressTypeId))(e,d,s),r=(e,d)=>"object"===typeof e?e.isNew?{id:0,name:e.text||""}:{id:e.value||e.id||0,name:d||""}:{id:e||0,name:d||""},{id:a,name:n}=r(e.stateId,e.stateName),{id:l,name:c}=r(e.cityId,e.cityName);return{...e,[d?"supplierId":"customerId"]:i,addressTypeId:ye(t),countryId:ye(e.countryId),stateId:a,cityId:l,stateName:n,cityName:c}},ye=e=>e&&"object"===typeof e?e.value:e,ge=e=>{e&&Q(e)},Se=(e,d)=>{const s={...V};if("countryId"===d)(0,c.Xh)(re,"stateId","name",s,"stateId",(d=>d.countryId===e.value)),(0,c.Xh)(null,"cityId","name",s,"cityId",null),(0,c.t5)(s,"stateId",r.fV.DISABLED,!1),v.current.updateFormFieldValue({countryId:e.value,stateId:null,cityId:null});else if("stateId"===d)e?(ee(e.value),(0,c.t5)(s,"cityId",r.fV.DISABLED,!1),v.current.updateFormFieldValue({stateId:e.value,cityId:null})):v.current.updateFormFieldValue({cityId:null});else if(!i&&"addressTypeId"===d){let d;switch(e.label){case"Billing":d=A?p.z.formFields.filter((e=>"isPreferredShipping"!==e.dataField&&"isShippingAndBilling"!==e.dataField)):p.z.formFields.filter((e=>"isPreferredShipping"!==e.dataField));break;case"Shipping":d=A?p.z.formFields.filter((e=>"isPreferredBilling"!==e.dataField&&"isShippingAndBilling"!==e.dataField)):p.z.formFields.filter((e=>"isPreferredBilling"!==e.dataField));break;case"AP":case"Primary":d=p.z.formFields.filter((e=>"isPreferredBilling"!==e.dataField&&"isPreferredShipping"!==e.dataField&&"isShippingAndBilling"!==e.dataField));break;default:d=p.z.formFields}s.formFields=d,s.initialState={...A?V.initialState:p.z.initialState,addressTypeId:e.value},N(s)}};(0,s.useEffect)((()=>{let e={...V};if("isShippingAndBilling"===j&&!1===M&&1===e.initialState.addressTypeId){let e;e=(0,l.G)(V,["isPreferredShipping"]),N(e)}else if("isShippingAndBilling"===j&&!1===M&&2===e.initialState.addressTypeId){let e;e=(0,l.G)(V,["isPreferredBilling"]),N(e)}}),[M,j]),(0,s.useImperativeHandle)(E,(()=>({callChildEditFunction:ge})));const me={DDL_CHANGED:Se,CHECK_CHANGE:(e,d)=>{if(w(e),x(d),"isShippingAndBilling"===d&&e){const e={...V};let d;d=p.z.formFields,e.formFields=d,N(e)}},DA_CHANGED:(e,d)=>{"stateId"===d?((0,c.t5)(V,"cityId",r.fV.ISTEXT,e),v.current.updateFormFieldValue({cityId:null})):"cityId"===d&&(e||((0,c.t5)(V,"stateId",r.fV.ISTEXT,e),v.current.updateFormFieldValue({cityId:null})))}};return(0,f.jsxs)("div",{className:"row mt-2 add-address-form",children:[(0,s.createElement)(a.A,{config:V,ref:v,...V,onActionChange:me,onDropdownAction:me,onCheckBoxChange:me,key:k}),(0,f.jsx)("div",{className:"col-md-12 mt-2",children:(0,f.jsxs)("div",{className:"d-flex align-item-end justify-content-end",children:[(0,f.jsx)(t.A,{buttonTypeClassName:"theme-button",buttonText:A?"Update":"Save",onClick:async()=>{const e=v.current.getFormData();if(!e)return;const s=fe(e,i,d,A);if(A){const e=((e,d,i)=>{const s=((e,d)=>!1===e&&d?d.customerAddressId:0)(i,d),t=((e,d)=>!0===e&&d?d.supplierAddressId:0)(i,d);return{...e,addressId:null===d?X:d.addressId,customerAddressId:s,supplierAddressId:t}})(s,$,i);q(e)}else{const e=D||s.customerId,d={...s,customerId:e};R(d)}},isLoading:U||K,isDisable:T}),(0,f.jsx)(t.A,{buttonTypeClassName:"dark-btn ml-5",buttonText:"Cancel",onClick:B})]})})]})}))}}]);
//# sourceMappingURL=9295.cbfa15da.chunk.js.map