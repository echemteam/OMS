"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2312],{67724:(e,t,a)=>{a.d(t,{A:()=>i});a(27565);var s=a(85097),n=a(27929);const i=e=>{let{isApprovalValidate:t,showModal:a,handleToggleModal:i,children:o,...r}=e;return(0,n.jsxs)(s.A,{className:`center-model-popup ${r.modelSizeClass}`,show:a,onHide:i,keyboard:!t,backdrop:!t||"static",children:[(0,n.jsx)(s.A.Header,{closeButton:!t,children:(0,n.jsx)("div",{className:"model-title",children:r.modalTitle})}),(0,n.jsx)(s.A.Body,{children:o})]})}},72312:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var s=a(27565),n=a(17295),i=a(69885),o=a(42823),r=a(74573),l=a(35200),c=a(80889),u=a(65748),d=a(11030),g=a(64866),f=a(19888),h=a(15269),m=a(62360),S=a(67724),A=a(76969),p=a(27929);const E=()=>{const e=(0,s.useRef)(),[t,a]=(0,s.useState)(""),[E,w]=(0,s.useState)(0),[T,b]=(0,s.useState)(),j=(0,g.A)(t,300),{confirm:x}=(0,c.A)(),C=(0,d.Zp)(),[D,v]=(0,s.useState)(!1),[N,y]=(0,s.useState)([]),[I,P]=(0,s.useState)(!1),[k,L]=(0,s.useState)(null),O=(0,h.T)(f.o.ADDUSER),U=(0,h.T)(f.o.EDITUSER),R=(0,h.T)(f.o.DELETEUSER),{formSetting:z}=o.ao,H=o.Ke.columns.find((e=>"Action"===e.name)),[B,{isLoading:M,isSuccess:V,data:$}]=(0,l.H_)(),[F,{isFetching:K,isSuccess:_,data:W}]=(0,l.Fg)(),[Y,{isSuccess:Z,data:q}]=(0,l.HC)(),G=(e,t)=>{const a={pagination:{pageNumber:e.pageNumber,pageSize:e.pageSize},filters:{searchText:j},sortString:t};B(a)};(0,s.useEffect)((()=>{!0===U.isViewOnly||!0===U.isEditable?H.defaultAction.allowEdit=!0:H.defaultAction.allowEdit=!1}),[U,H.defaultAction.allowEdit]),(0,s.useEffect)((()=>{!0===R.hasAccess?H.defaultAction.allowDelete=!0:!1===R.hasAccess&&(H.defaultAction.allowDelete=!1)}),[R,H.defaultAction.allowDelete]),(0,s.useEffect)((()=>{!0===O.hasAccess&&(z.isViewOnly=!1,v(!0))}),[U,O,z.isViewOnly]),(0,s.useEffect)((()=>{V&&$&&($&&b($.dataSource),$.totalRecord&&w($.totalRecord))}),[V,$]),(0,s.useEffect)((()=>{if(Z&&q){u.A.success(q.errorMessage);const t=e.current.getCurrentPageObject();G(t,e.current.generateSortingString())}}),[Z,q]),(0,s.useEffect)((()=>{if(e.current){const t=e.current.getCurrentPageObject();G(t,e.current.generateSortingString())}}),[j]),(0,s.useEffect)((()=>{if(!K&&_&&W&&W){const e=W.map((e=>({...e,userLoginDateTime:(0,A.Ay)(e.userLoginDateTime),userLogoutDateTime:(0,A.Ay)(e.userLogoutDateTime)})));y(e),P(!0)}}),[K,_,W]);const J={EDIT:e=>{C(`/EditUser/${(0,r.rS)(e.userId)}`,"_blank")},DELETE:e=>{x("Delete?","Are you sure you want to Delete?","Delete","Cancel").then((t=>{t&&Y(e.userId)}))},HISTORY:e=>{L(e),F(e.userId)}};return(0,p.jsxs)("div",{className:"user-lists",children:[(0,p.jsx)(n.default,{searchInputName:"Search By User Name",titleButtonClick:()=>{C("/AddEditUser")},buttonClassName:"btn theme-button",rightButton:D,buttonText:"Add User",textWithIcon:!0,iconImg:i.m.PlusIcon,handleChange:e=>{const t=e.target.value;a(t)},searchInput:!0,children:(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-md-12 table-striped ",children:(0,p.jsx)(m.A,{ref:e,configuration:o.Ke,dataSource:T,allowPagination:!0,pagination:{totalCount:E,pageSize:25,currentPage:1},onPageChange:t=>{G(t,e.current.generateSortingString())},onSorting:t=>{G(e.current.getCurrentPageObject(),t)},isLoading:M,onActionChange:J})})})}),(0,p.jsx)(S.A,{showModal:I,handleToggleModal:()=>{P(!1)},modalTitle:`User History : ${(null===k||void 0===k?void 0:k.firstName)||""} ${(null===k||void 0===k?void 0:k.lastName)||""}`,modelSizeClass:"w-40",children:(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-md-12 table-striped p-3",children:(0,p.jsx)(m.A,{ref:e,configuration:o.Oo,dataSource:N,allowPagination:!1,pagination:{totalCount:E,pageSize:20,currentPage:1}})})})})]})}}}]);
//# sourceMappingURL=2312.78bb8740.chunk.js.map