"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9263],{99263:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var i=s(27565),a=s(60497),n=s(28734),c=s(18637),d=s(37549),o=s(38860),l=s(3737),r=s(58412),u=s(15269),m=s(65748),I=s(17690),p=s(27929);const f=i.lazy((()=>s.e(1435).then(s.bind(s,51435)))),y=i.lazy((()=>s.e(9024).then(s.bind(s,59024)))),S=(0,i.forwardRef)((e=>{let{keyId:t,isUpdateContactModel:s,addEditContactMutation:S,onSidebarClose:T,onSuccess:A,childRef:C,editRef:h,SecurityKey:g,customerStatusId:E,allGetAllContactTypesData:x,isGetAllContactTypesSucess:L,isEditablePage:b,isSupplier:v,isEdit:N,isOpen:j,getContactById:V,getContectTypeId:D,customerId:M,isOrderManage:w,onhandleApiCall:k,contryIdCode:O,orderResetValue:F,getCompletionCount:R}=e;const B=(0,i.useRef)(),{formSetting:U}=d.A,[P,z]=(0,i.useState)(0),[H,G]=(0,i.useState)(!1),[K,X]=(0,i.useState)(0),[q,J]=(0,i.useState)(0),[Q,W]=(0,i.useState)(!1),[Y,Z]=(0,i.useState)([]),[,$]=(0,i.useState)(!1),[_,ee]=(0,i.useState)([]),[te,se]=(0,i.useState)(d.A),[ie,{isFetching:ae,isSuccess:ne,data:ce}]=V(),[de,{isLoading:oe,isSuccess:le,data:re}]=S();(0,i.useEffect)((()=>{if(s&&L){const e=e=>v?e.isForSuppliers:e.isForCustomers;(0,r.Xh)(x,"contactTypeId","type",te,"contactTypeId",e),$((e=>!e))}}),[L,s]);const ue=()=>{const e=B.current.getFormData();if(e)if(_.length>0){const s=(0,l.H)(e.contactTypeId,N),i=me(e,s,v,t,_,Y,q,K);let a={...i,customerId:M||i.customerId};de(a)}else m.A.warning(I.K.ContactEmailAddressRequired)},me=(e,t,s,i,a,n,c,d)=>({...e,contactId:P,contactTypeId:String(t),[s?"supplierId":"customerId"]:i,emailAddressList:a.length>0?(0,l.Vz)(a):null,phoneNumberList:n.length>0?(0,l.Ix)(n):null,[s?"supplierContactId":"customerContactId"]:s?c:d});(0,i.useEffect)((()=>{if(le&&re){if(re.errorMessage.includes("EXISTS"))return void m.A.warning(re.errorMessage);A&&(A(),m.A.success(re.errorMessage),z(null===re||void 0===re?void 0:re.keyValue),w&&k(D)),R&&R()}}),[le,re]),(0,i.useEffect)((()=>{if(!ae&&ne&&ce){let e=ce,t={...d.A};t.initialState={firstName:e.firstName,lastName:e.lastName,contactTypeId:e.contactTypeId,isPrimary:e.isPrimary},se(t),z(e.contactId),v?J(null===e||void 0===e?void 0:e.supplierContactId):X(null===e||void 0===e?void 0:e.customerContactId),(0,r.t5)(t,"contactTypeId",n.fV.MULTISELECT);const s=[...ce.phoneNumberList].sort(((e,t)=>e.phoneId-t.phoneId)).map(((e,t)=>({...e,id:t+1,extension:0===e.extension?"-":e.extension}))),i=[...ce.emailAddressList].sort(((e,t)=>t.emailId-e.emailId)).map(((e,t)=>({...e,id:t+1})));Z(s),ee(i)}}),[ae,ne]),(0,i.useImperativeHandle)(h,(()=>({callEditFunction:Ie}))),(0,i.useEffect)((()=>{if(b&&g){const e=(0,u.T)(g.EDIT),t=(0,u.T)(g.ADD);e&&U&&(H?!0===e.isViewOnly?(U.isViewOnly=!0,W(!0)):(U.isViewOnly=!1,W(!1)):H||!0===t.hasAccess&&(U.isViewOnly=!1,W(!1)))}}),[H,h,g]);const Ie=e=>{G(!0),e&&ie(e)};(0,i.useEffect)((()=>{if(!N&&!w){v?(0,r.t5)(d.A,"contactTypeId",n.fV.MULTISELECT,!1):(0,r.t5)(d.A,"contactTypeId",n.fV.MULTISELECT,!0);let e={...d.A};se(e),j&&(z(0),G(!1),Z([]),ee([]))}if(w){(0,r.t5)(d.A,"contactTypeId",n.fV.DISABLED,!0),(0,r.t5)(d.A,"contactTypeId",n.fV.MULTISELECT,!1);let e={...d.A};e.initialState={...e.initialState,contactTypeId:D},se(e)}}),[j]);const pe=()=>{(0,r.t5)(d.A,"contactTypeId",n.fV.DISABLED,!1);let e={...d.A};e.initialState={...d.A.initialState},se(e),X(0),J(0)};return(0,i.useImperativeHandle)(C,(()=>({callChildFunction:pe}))),(0,i.useEffect)((()=>{F&&w&&(Z([]),ee([]))}),[F]),(0,p.jsxs)("div",{children:[ae?(0,p.jsx)(o.A,{}):(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)("div",{className:"row mt-2 addEditContact-form",children:(0,p.jsx)(c.A,{config:te,ref:B,...te})}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)(f,{isButtonDisable:Q,emailAddressList:_,setEmailAddressList:ee,contactId:P,isOrderManage:w}),(0,p.jsx)(y,{isButtonDisable:Q,phoneNumberList:Y,setPhoneNumberList:Z,contactId:P,contryIdCode:O,isOrderManage:w})]})]}),(0,p.jsx)("div",{className:"col-md-12 mt-3",children:(0,p.jsx)("div",{className:"d-flex align-item-end justify-content-end",children:(0,p.jsxs)("div",{className:"d-flex align-item-end",children:[(0,p.jsx)(a.A,{buttonTypeClassName:"theme-button",buttonText:"Save",isLoading:oe,onClick:async()=>{ue()},isDisable:Q}),(0,p.jsx)(a.A,{buttonTypeClassName:"dark-btn ml-5",buttonText:"Cancel",onClick:T})]})})})]})}))}}]);
//# sourceMappingURL=9263.8072f796.chunk.js.map