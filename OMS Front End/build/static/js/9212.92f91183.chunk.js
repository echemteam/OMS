"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9212],{99212:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var o=s(27565),n=s(17295),c=s(18637),r=s(60497),a=(s(69885),s(15335)),u=s(79663);const i={name:"SubCustomer From",initialState:{customerId:""},formFields:[{id:"customerId",lable:"Link Customer ",Field_Name:"Link Customer",fieldType:a.Q.SELECT,dataField:"customerId",fieldSetting:{placeholder:"Select Customer ",isMultiSelect:!0,options:[]},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-12 col-md-12 col-12 col-12 mb-input"}}],formSetting:{isViewOnly:!1}},l={columns:[{name:"Customer",fieldName:"subCustomerName",colStyle:{width:"30%"},allowShort:!0},{name:"Country",fieldName:"countryName",colStyle:{width:"25%"},allowShort:!0},{name:"Tax Id",fieldName:"taxId",colStyle:{width:"25%"},allowShort:!0},{name:"Action",colStyle:{width:"20%"},colType:u.f.ACTION,defaultAction:{allowDelete:!0},customAction:[{name:"VIEWCUSTOMER",iconName:"lets-icons:view",title:"View Customer",className:"view-icon"}]}]};var d=s(58412),m=s(65748),f=s(32813),C=s(26067),g=s(27929);const S=e=>{const t=(0,o.useRef)(),[s,n]=(0,o.useState)(i),[a,u]=(0,o.useState)(!1),[l,{isSuccess:S,data:I}]=(0,C.xi)(),[h,{isLoading:p,isSuccess:x,data:b}]=(0,C.En)();(0,o.useEffect)((()=>{S&&I&&((0,d.Xh)(I,"customerId","name",s,"customerId"),u((e=>!e)))}),[S,I]),(0,o.useEffect)((()=>{w()}),[e.customerId]);const w=()=>{e.customerId>0&&l(e.customerId)};(0,o.useEffect)((()=>{x&&b&&(e.onSuccess(),m.A.success(b.errorMessage),(0,f.t)(i,n,null),w())}),[x,b]);return(0,o.useImperativeHandle)(e.getLinkCustomerRef,(()=>({callChildFunction:w}))),(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)(c.A,{config:s,ref:t,...s},a),(0,g.jsx)("div",{className:"col-xxl-6 col-xl-12 col-md-12 col-12 col-12 mt-2 d-flex align-items-center",children:(0,g.jsx)(r.A,{buttonTypeClassName:"theme-button",buttonText:"Assign",onClick:()=>{const s=t.current.getFormData();if(s&&!s.subCompanyMainCompanyId){let t=s.customerId.map((e=>({customerId:e}))).map((e=>e.customerId)).join(",");const o={...s,customerId:e.customerId,subCustomerId:t};h(o)}},isLoading:p})})]})};var I=s(80889),h=s(74573),p=s(62360);const x=e=>{const t=(0,o.useRef)(),[s,n]=(0,o.useState)(),[c,r]=(0,o.useState)(0),{confirm:a}=(0,I.A)(),[u,{isLoading:i,isSuccess:d,data:f}]=(0,C.Be)(),[S,{isSuccess:x,data:b}]=(0,C.yU)(),w=(t,s)=>{const o={pagination:{pageNumber:t.pageNumber,pageSize:t.pageSize},filters:{searchText:""},sortString:s,customerId:e.customerId};u(o)},N=e=>{w(e,t.current.generateSortingString())},y=()=>{if(t.current){const e=t.current.getCurrentPageObject();w(e,t.current.generateSortingString())}};(0,o.useEffect)((()=>{if(x&&b){m.A.success(b.errorMessage);const s=t.current.getCurrentPageObject();N(s),e.onGetLinkCustomer()}}),[x,b]);(0,o.useEffect)((()=>{y()}),[]),(0,o.useEffect)((()=>{d&&f&&(f&&n(f.dataSource),f.totalRecord&&r(f.totalRecord))}),[d,f]);const j={VIEWCUSTOMER:e=>{window.open(`/CustomerDetails/${(0,h.rS)(e.subCustomerId)}`,"_blank")},DELETE:e=>{a("Delete?","Are you sure you want to Delete?","Delete","Cancel").then((t=>{t&&S(e.subCustomerMainCustomerId)}))}};return(0,o.useImperativeHandle)(e.childRef,(()=>({callChildFunction:y}))),(0,g.jsx)("div",{className:"row",children:(0,g.jsx)("div",{className:"col-md-12 table-striped p-3",children:(0,g.jsx)(p.A,{ref:t,configuration:l,dataSource:s,allowPagination:!0,pagination:{totalCount:c,pageSize:20,currentPage:1},onPageChange:N,onSorting:e=>{w(t.current.getCurrentPageObject(),e)},isLoading:i,onActionChange:j})})})},b=e=>{let{customerId:t}=e;const s=(0,o.useRef)(),c=(0,o.useRef)();return(0,g.jsx)("div",{className:"link-customer",children:(0,g.jsxs)(n.default,{cardTitle:"Link Customer",buttonClassName:"theme-button",children:[(0,g.jsx)(S,{customerId:t,onSuccess:()=>{s.current&&s.current.callChildFunction()},getLinkCustomerRef:c}),(0,g.jsx)(x,{customerId:t,childRef:s,onGetLinkCustomer:()=>{c.current&&c.current.callChildFunction()}})]})})};var w=s(99704);const N=()=>{const{customerId:e}=(0,o.useContext)(w.A);return(0,g.jsx)(b,{customerId:e})}}}]);
//# sourceMappingURL=9212.92f91183.chunk.js.map