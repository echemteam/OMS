"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1390],{21390:(e,i,t)=>{t.r(i),t.d(i,{default:()=>y});var a=t(27565),l=t(15335);const r={name:"Setting Form",initialState:{paymentTermId:"",creditLimit:0,paymentMethodId:"",billingCurrency:"USD",invoiceSubmissionInstruction:"",bankWireFee:"",salesTax:"",cardProcessingCharges:"",exemptSalesTax:!0},formFields:[{id:"paymentTermId",lable:"Default Payment Terms Template ",Field_Name:"Default Payment Terms Template",fieldType:l.Q.SELECT,dataField:"paymentTermId",fieldSetting:{placeholder:"Select Default Payment Terms Template",isEnableOnChange:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-12 col-md-12 col-12 col-12 mb-input"}},{id:"creditLimit",lable:"Credit Limit ",Field_Name:"Credit Limit",fieldType:l.Q.NUMERIC,dataField:"creditLimit",fieldSetting:{placeholder:"Enter Credit Limit",allowSpace:!0,minLength:0,maxLength:6,masking:{isMasking:!0,maskingType:"currency",countryCode:"USD"}},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-12 col-md-12 col-12 col-12 mb-input"}},{id:"paymentMethodId",lable:"Payment Method ",Field_Name:"Payment Method",fieldType:l.Q.SELECT,dataField:"paymentMethodId",fieldSetting:{placeholder:"Select Payment Method",isEnableOnChange:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-12 col-md-12 col-12 col-12 mb-input"}},{id:"billingCurrency",lable:"Billing Currency ",Field_Name:"Billing Currency",fieldType:l.Q.SELECT,dataField:"billingCurrency",fieldSetting:{placeholder:"Billing Currency",isEnableOnChange:!0,options:[{value:"USD",label:"USD"},{value:"IND",label:"IND"}]},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-12 col-md-12 col-12 col-12 mb-input"}},{id:"exemptSalesTax",lable:"Exempt Sales Tax",Field_Name:"Exempt Sales Tax",fieldType:l.Q.CHECKBOX,dataField:"exemptSalesTax",fieldSetting:{placeholder:"",isEnableOnChange:!0},style:{containerCss:"col-xxl-6 col-xl-12 col-md-12 col-12 col-12 mb-input mt-3"}},{id:"salesTax",lable:"Sales TAX (%)",Field_Name:"Sales TAX",fieldType:l.Q.NUMERIC,dataField:"salesTax",fieldSetting:{placeholder:"Enter Sales TAX"},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-12 col-md-12 col-12 col-12 mb-input"}},{id:"bankWireFee",lable:"Bank Wire Fee ($)",Field_Name:"Bank Wire Fee",fieldType:l.Q.NUMERIC,dataField:"bankWireFee",fieldSetting:{placeholder:"Enter Bank Wire Fee",maxLength:4},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-12 col-md-12 col-12 col-12 mb-input"}},{id:"cardProcessingCharges",lable:"Card Processing Charges (%)",Field_Name:"Card Processing Charges",fieldType:l.Q.NUMERIC,dataField:"cardProcessingCharges",fieldSetting:{placeholder:"Enter Card Processing Charges"},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-12 col-md-12 col-12 col-12 mb-input"}},{id:"invoiceSubmissionInstruction",lable:"Invoice Submission Instruction ",Field_Name:"Invoice Submission Instruction",fieldType:l.Q.CKEDITOR,dataField:"invoiceSubmissionInstruction",fieldSetting:{placeholder:"",allowSpace:!0},style:{containerCss:"col-xxl-12 col-xl-12 col-md-12 col-12 mb-input"}}],formSetting:{isViewOnly:!1}};var n=t(19888),s=t(60497),d=t(18637),o=t(38860),c=t(58412),m=t(99704),g=t(15269),u=t(28734),C=t(65748),F=t(45050),h=t(73886),f=t(10723),S=t(27929);const p=!0,y=e=>{let{isEditablePage:i,customerStatusId:t}=e;const l=(0,a.useRef)(),[y,b]=(0,a.useState)(!1),[T,x]=(0,a.useState)(!0),[I,k]=(0,a.useState)(!1),[v,E]=(0,a.useState)(!0),W=(0,f.d4)((e=>e.organization)),[P,A]=(0,a.useState)(!1),[D,L]=(0,a.useState)(r),[N,M]=(0,a.useState)(0),{customerId:H,customerCountryId:R,setCustomerCountryId:U,isResponsibleUser:w,settingRef:j,activeTab:_,setIsExistsFinancialSetting:O,financialRef:Q,subCustomer:q,getCustomerCompletionCount:B}=(0,a.useContext)(m.A),[V,{isSuccess:X,data:K}]=(0,F.qC)(),[G,{isSuccess:z,data:$}]=(0,F.ET)(),[J,{isFetching:Y,isSuccess:Z,data:ee}]=(0,F.mI)(),[ie,{isLoading:te,isSuccess:ae,data:le}]=(0,F.bN)(),{formSetting:re}=r,ne=(0,g.T)(n.o.ADDEDITCUSTOMERFINANCIAL);(0,a.useEffect)((()=>{i&&(w||(!0===ne.hasAccess?(x(!0),re.isViewOnly=!1):(x(!1),re.isViewOnly=!0)))}),[ne]),(0,a.useEffect)((()=>{V(),G(),M(0)}),[]),(0,a.useEffect)((()=>{i||3!==_||p&&ce(!0,"exemptSalesTax")}),[_]),(0,a.useEffect)((()=>{R&&(J(H),se())}),[R,U,t]),(0,a.useEffect)((()=>{H>0&&(J(H),se())}),[H]),(0,a.useEffect)((()=>{let e={...D};const i=e.formFields.some((e=>"bankWireFee"===e.dataField)),t=e.formFields.some((e=>"cardProcessingCharges"===e.dataField));i?b(!0):i||b(!1),t?k(!0):t||k(!1)}),[D]);const se=()=>{let e,i={...D};const t=i.formFields.some((e=>"bankWireFee"===e.dataField)),a=i.formFields.some((e=>"salesTax"===e.dataField));if(R===u.uC.USA)e=i.formFields.filter((e=>"bankWireFee"!==e.dataField)),i.formFields=e;else if(R!==u.uC.USA&&!t){const t=(0,c.Nw)(r,"bankWireFee"),a=i.formFields.length-1;e=[...i.formFields],e.splice(a,0,t),i.formFields=e}if(!a&&!v){const t=(0,c.Nw)(r,"salesTax"),a=i.formFields.length-2;e=[...i.formFields],e.splice(a,0,t),i.formFields=e}v&&(e=i.formFields.filter((e=>"salesTax"!==e.dataField)),i.formFields=e),i.formFields=i.formFields.filter((e=>"cardProcessingCharges"!==e.dataField)),ee||null!==ee&&void 0!==ee&&ee.creditLimit||i.initialState.creditLimit||(i.initialState.creditLimit=W.accountingSetting&&W.accountingSetting.creditLimit?W.accountingSetting.creditLimit:1e3),ee||null!==ee&&void 0!==ee&&ee.paymentTermId||i.initialState.paymentTermId||(i.initialState.paymentTermId=W.otherCharge&&W.otherCharge.defaultPaymentTerms?W.otherCharge.defaultPaymentTerms:""),ee||null!==ee&&void 0!==ee&&ee.cardProcessingCharges||i.initialState.cardProcessingCharges||(i.initialState.cardProcessingCharges=W.otherCharge&&W.otherCharge.creditCardServiceFees?W.otherCharge.creditCardServiceFees:""),ee||null!==ee&&void 0!==ee&&ee.bankWireFee||i.initialState.bankWireFee||(i.initialState.bankWireFee=W.otherCharge&&W.otherCharge.bankWireFees?W.otherCharge.bankWireFees:""),L(i)};(0,a.useEffect)((()=>{X&&K&&((0,c.Xh)(K,"paymentTermId","paymentTerm",r,"paymentTermId"),A((e=>!e)))}),[X,K]),(0,a.useEffect)((()=>{z&&$&&((0,c.Xh)($,"paymentMethodId","method",r,"paymentMethodId"),A((e=>!e)))}),[z,$]),(0,a.useEffect)((()=>{if(!Y&&Z&&ee){if(ee&&!Y){let e;(0,h.j)(t)?(0,c.t5)(D,"billingCurrency","isDisabled",!0):(0,c.t5)(D,"billingCurrency","isDisabled"),ee.paymentMethodId!==u.HH.CREDITCARD?(b(!0),k(!1),e=ge(ee.paymentMethodId,!1)):ee.paymentMethodId===u.HH.CREDITCARD&&(b(!1),k(!0),e=me(ee.paymentMethodId,!1));let i={...e};if(i.initialState={...e.initialState,customerAccountingSettingId:ee.customerAccountingSettingId,paymentTermId:ee.paymentTermId,creditLimit:ee.creditLimit,paymentMethodId:ee.paymentMethodId,billingCurrency:ee.billingCurrency,invoiceSubmissionInstruction:ee.invoiceSubmissionInstruction,bankWireFee:ee.bankWireFee,salesTax:ee.salesTax,exemptSalesTax:ee.exemptSalesTax,cardProcessingCharges:ee.cardProcessingCharges},ee.exemptSalesTax)i.formFields=i.formFields.filter((e=>"salesTax"!==e.dataField));else{const e=i.formFields.some((e=>"bankWireFee"===e.dataField)),t=i.formFields.some((e=>"cardProcessingCharges"===e.dataField));if(!i.formFields.some((e=>"salesTax"===e.dataField))){const a=(0,c.Nw)(r,"salesTax");let l;l=e&&!t||!e&&t?2:e&&t?3:1;const n=i.formFields.length-l;let s=[...i.formFields];s.splice(n,0,a),i.formFields=s}}L(i),ee.exemptSalesTax||E(!1),A((e=>!e))}}else i&&0===_&&p&&ce(!0,"exemptSalesTax")}),[Y,Z,ee]),(0,a.useEffect)((()=>{ae&&le&&(C.A.success(le.errorMessage),O(!0),M(le.keyValue),Q.current&&Q.current.handleGetDefaultList(),B(H,q))}),[ae,le]),(0,a.useImperativeHandle)(j,(()=>({onhandleEdit:de})));const de=async()=>{const e=l.current.getFormData(),i=e&&e.customerAccountingSettingId?e.customerAccountingSettingId:N;if(e&&!i){var t;const i={...e,customerId:H,paymentTermId:e.paymentTermId.value,paymentMethodId:e.paymentMethodId.value,billingCurrency:null!==(t=e.billingCurrency)&&void 0!==t&&t.value?e.billingCurrency.value:e.billingCurrency,bankWireFee:e.bankWireFee&&y?e.bankWireFee:null,salesTax:e.salesTax&&!e.exemptSalesTax?e.salesTax:null,exemptSalesTax:e.exemptSalesTax,cardProcessingCharges:e.cardProcessingCharges&&I?e.cardProcessingCharges:null};e.exemptSalesTax||E(!1),ie(i)}else if(e&&i){const t=oe(e,i);ie(t)}},oe=(e,i)=>({...e,customerAccountingSettingId:e.customerAccountingSettingId?e.customerAccountingSettingId:i,customerId:H,paymentTermId:e.paymentTermId&&"object"===typeof e.paymentTermId?e.paymentTermId.value:e.paymentTermId,paymentMethodId:e.paymentMethodId&&"object"===typeof e.paymentMethodId?e.paymentMethodId.value:e.paymentMethodId,billingCurrency:e.billingCurrency&&"object"===typeof e.billingCurrency?e.billingCurrency.value:e.billingCurrency,bankWireFee:e.bankWireFee&&y?e.bankWireFee:null,salesTax:e.salesTax&&!e.exemptSalesTax?e.salesTax:null,exemptSalesTax:e.exemptSalesTax,cardProcessingCharges:e.cardProcessingCharges&&I?e.cardProcessingCharges:null}),ce=(e,i)=>{((e,i)=>{if("exemptSalesTax"===i&&e){let e,i={...D};i.formFields=i.formFields.filter((e=>"salesTax"!==e.dataField)),i.formFields=i.formFields.filter((e=>"cardProcessingCharges"!==e.dataField));const t=i.formFields.some((e=>"bankWireFee"===e.dataField));if(R===u.uC.USA)e=i.formFields.filter((e=>"bankWireFee"!==e.dataField)),i.formFields=e;else if(R!==u.uC.USA&&!t){const t=(0,c.Nw)(r,"bankWireFee"),a=i.formFields.length-1;e=[...i.formFields],e.splice(a,0,t),i.formFields=e}ee||null!==ee&&void 0!==ee&&ee.creditLimit||i.initialState.creditLimit||(i.initialState.creditLimit=W.accountingSetting&&W.accountingSetting.creditLimit?W.accountingSetting.creditLimit:1e3),ee||null!==ee&&void 0!==ee&&ee.paymentTermId||i.initialState.paymentTermId||(i.initialState.paymentTermId=W.otherCharge&&W.otherCharge.defaultPaymentTerms?W.otherCharge.defaultPaymentTerms:""),ee||null!==ee&&void 0!==ee&&ee.cardProcessingCharges||i.initialState.cardProcessingCharges||(i.initialState.cardProcessingCharges=W.otherCharge&&W.otherCharge.creditCardServiceFees?W.otherCharge.creditCardServiceFees:""),ee||null!==ee&&void 0!==ee&&ee.bankWireFee||i.initialState.bankWireFee||(i.initialState.bankWireFee=W.otherCharge&&W.otherCharge.bankWireFees?W.otherCharge.bankWireFees:""),L(i)}else if("exemptSalesTax"===i&&!e){let i,t={...D};const a=t.formFields.some((e=>"bankWireFee"===e.dataField)),n=t.formFields.some((e=>"cardProcessingCharges"===e.dataField));let s;if(s=a&&!n||!a&&n?2:a&&n?3:1,!t.formFields.some((e=>"salesTax"===e.dataField))){const a=(0,c.Nw)(r,"salesTax"),n=t.formFields.length-s;i=[...t.formFields],i.splice(n,0,a),t.formFields=i;const d=l.current.getFormDataWithoutValidation();t.initialState={...d,exemptSalesTax:e,salesTax:""},ee||null!==ee&&void 0!==ee&&ee.creditLimit||t.initialState.creditLimit||(t.initialState.creditLimit=W.accountingSetting&&W.accountingSetting.creditLimit?W.accountingSetting.creditLimit:1e3),ee||null!==ee&&void 0!==ee&&ee.paymentTermId||t.initialState.paymentTermId||(t.initialState.paymentTermId=W.otherCharge&&W.otherCharge.defaultPaymentTerms?W.otherCharge.defaultPaymentTerms:""),ee||null!==ee&&void 0!==ee&&ee.cardProcessingCharges||t.initialState.cardProcessingCharges||(t.initialState.cardProcessingCharges=W.otherCharge&&W.otherCharge.creditCardServiceFees?W.otherCharge.creditCardServiceFees:""),ee||null!==ee&&void 0!==ee&&ee.bankWireFee||t.initialState.bankWireFee||(t.initialState.bankWireFee=W.otherCharge&&W.otherCharge.bankWireFees?W.otherCharge.bankWireFees:""),L(t)}}})(e,i)},me=(e,i)=>{let t=(0,c.Nw)(r,"cardProcessingCharges"),a={...D};R===u.uC.USA&&(a.formFields=a.formFields.filter((e=>"bankWireFee"!==e.dataField)));let n=i?e.value:e;R!==u.uC.USA&&n===u.HH.CREDITCARD&&(a.formFields=a.formFields.filter((e=>"bankWireFee"!==e.dataField)));if(!a.formFields.some((e=>"cardProcessingCharges"===e.dataField))){const e=a.formFields.length-1;let i=[...a.formFields];i.splice(e,0,t),a.formFields=i}const s=l.current.getFormDataWithoutValidation();return a.initialState={...s,paymentMethodId:e,bankWireFee:"",cardProcessingCharges:W.otherCharge&&W.otherCharge.creditCardServiceFees?W.otherCharge.creditCardServiceFees:""},a},ge=(e,i)=>{let t=i?e.value:e;const a=(0,c.Nw)(r,"bankWireFee");let n={...D};n.formFields=n.formFields.filter((e=>"cardProcessingCharges"!==e.dataField));const s=n.formFields.some((e=>"bankWireFee"===e.dataField));if(s||t===u.HH.ACHECHECK){if(s&&(R===u.uC.USA||t===u.HH.ACHECHECK)){let e=[...n.formFields];n.formFields=n.formFields.filter((e=>"bankWireFee"!==e.dataField)),e=[...n.formFields],n.formFields=e}}else{const e=n.formFields.length-1;let i=[...n.formFields];R!==u.uC.USA&&i.splice(e,0,a),n.formFields=i}R!==u.uC.USA&&t===u.HH.CREDITCARD&&(n.formFields=n.formFields.filter((e=>"bankWireFee"!==e.dataField)));const d=l.current.getFormDataWithoutValidation();return n.initialState={...d,paymentMethodId:e,cardProcessingCharges:"",bankWireFee:W.otherCharge&&W.otherCharge.bankWireFees?W.otherCharge.bankWireFees:""},n},ue={DDL_CHANGED:(e,i)=>{if("paymentMethodId"===i)if(e.value!==u.HH.CREDITCARD){b(!0),k(!1);const i=ge(e,!0);L(i)}else if(e.value===u.HH.CREDITCARD){b(!1),k(!0);const i=me(e,!0);L(i)}},CHECK_CHANGE:ce};return(0,S.jsxs)("div",{className:"row",children:[Y?(0,S.jsx)(o.A,{}):(0,S.jsx)(d.A,{config:D,ref:l,onCheckBoxChange:ue,onActionChange:ue},P),i&&T?(0,S.jsx)("div",{className:"col-md-12 mt-2 mb-3",children:(0,S.jsx)("div",{className:"d-flex align-item-end justify-content-end",children:(0,S.jsx)("div",{className:"d-flex align-item-end",children:(0,S.jsx)(s.A,{buttonTypeClassName:"theme-button",buttonText:"Save",onClick:de,isLoading:te})})})}):null]})}}}]);
//# sourceMappingURL=1390.90a067a5.chunk.js.map