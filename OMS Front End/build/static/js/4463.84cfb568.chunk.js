"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4463],{67724:(e,t,i)=>{i.d(t,{A:()=>s});i(27565);var l=i(85097),a=i(27929);const s=e=>{let{isApprovalValidate:t,showModal:i,handleToggleModal:s,children:d,...n}=e;return(0,a.jsxs)(l.A,{className:`center-model-popup ${n.modelSizeClass}`,show:i,onHide:s,keyboard:!t,backdrop:!t||"static",children:[(0,a.jsx)(l.A.Header,{closeButton:!t,children:(0,a.jsx)("div",{className:"model-title",children:n.modalTitle})}),(0,a.jsx)(l.A.Body,{children:d})]})}},74463:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var l=i(27565),a=i(15335);const s={initialState:{smtpSettingId:0,organizationId:0,emailProvider:"",smtpServer:"",smtpPort:"",smtpUserName:"",smtpPassword:"",useSsl:!0,clientId:"",clientSecret:"",tenantId:""},formFields:[{id:"emailProvider",lable:"Email Provider  ",Field_Name:"Email Provider ",fieldType:a.Q.SELECT,dataField:"emailProvider",fieldSetting:{placeholder:"Select Email Provider ",isEnableOnChange:!0,isDisabled:!1},validation:[{type:"require"}],style:{containerCss:"col-xxl-6 col-xl-6 col-md-12 col-12 mb-input"}},{id:"smtpServer",lable:"Server",Field_Name:"Server",fieldType:a.Q.INPUT,dataField:"smtpServer",fieldSetting:{placeholder:"Enter Server",allowSpace:!0,maxLength:255},validation:[{type:"require"}],style:{containerCss:"col-md-6 mb-3 mb-input relative"}},{id:"smtpPort",lable:"Port",Field_Name:"Port",fieldType:a.Q.NUMERIC,dataField:"smtpPort",fieldSetting:{placeholder:"Enter Port",allowSpace:!1,maxLength:5},validation:[{type:"require"}],style:{containerCss:"col-md-6 mb-3 mb-input relative"}},{id:"smtpUserName",lable:"Email",Field_Name:"Email",fieldType:a.Q.INPUT,dataField:"smtpUserName",fieldSetting:{placeholder:"Enter Email",allowSpace:!0,maxLength:65},validation:[{type:"require"},{type:"email"}],style:{containerCss:"col-md-6 mb-3 mb-input relative"}},{id:"smtpPassword",lable:"App Password ",Field_Name:"App Password",fieldType:a.Q.PASSWORD,dataField:"smtpPassword",fieldSetting:{placeholder:"Enter Your App Password",maxLength:20},validation:[{type:"require"}],style:{containerCss:"col-md-6 mb-input"}},{id:"clientId",lable:"Client Id",Field_Name:"Client Id",fieldType:a.Q.INPUT,dataField:"clientId",fieldSetting:{placeholder:"Enter Client Id",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-md-6 mb-3 mb-input relative"}},{id:"clientSecret",lable:"Client Secret",Field_Name:"Client Secret",fieldType:a.Q.INPUT,dataField:"clientSecret",fieldSetting:{placeholder:"Enter Client Secret",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-md-6 mb-3 mb-input relative"}},{id:"tenantId",lable:"Tenant Id",Field_Name:"Tenant Id",fieldType:a.Q.INPUT,dataField:"tenantId",fieldSetting:{placeholder:"Enter Tenant Id",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-md-6 mb-3 mb-input relative"}},{id:"useSsl",lable:"UseSSL",Field_Name:"useSsl",fieldType:a.Q.CHECKBOX,dataField:"useSsl",style:{containerCss:"col-xxl-4 col-xl-4 col-md-12 col-12 col-12 mt-4"}}],formSetting:{isViewOnly:!1}},d={name:"Test Email",initialState:{emailTo:"",subject:"SMTP Configuration Test Successful",body:"Dear Team, This confirms that the SMTP configuration has been successfully validated. The outbound email settings are functioning as expected. Please note that there is no need to reply to this message."},formFields:[{id:"emailTo",lable:"Email To",Field_Name:"Email To",fieldType:a.Q.INPUT,dataField:"emailTo",fieldSetting:{placeholder:"Enter Email To",allowSpace:!1},validation:[{type:"require"}],style:{containerCss:"col-md-6 mb-3 mt-3"}},{id:"subject",lable:"Subject",Field_Name:"Subject",fieldType:a.Q.INPUT,dataField:"subject",fieldSetting:{placeholder:"Enter Subject",allowSpace:!1},validation:[{type:"require"}],style:{containerCss:"col-md-6 mb-3 mt-3"}},{id:"body",lable:"Body",Field_Name:"Body",fieldType:a.Q.CKEDITOR,dataField:"body",fieldSetting:{placeholder:"Enter Body",allowSpace:!1},validation:[{type:"require"}],style:{containerCss:"col-md-12 mb-3 mt-3"}}]};var n=i(18637),r=i(60497),o=i(6352),m=i(65748),c=i(74573),u=i(38860),p=i(10723),S=i(28734),v=i(15889),f=i(58412),b=i(27929);const h=function(e){const t=(0,l.useRef)(),[i]=(0,l.useState)(d),[a,{isLoading:s,isSuccess:c,data:u}]=(0,o.Yf)();return(0,l.useEffect)((()=>{c&&u&&(0!=u.keyValue?m.A.success(u.errorMessage):m.A.error(u.errorMessage),e.onClose())}),[c,u]),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-md-12 add-role-input",children:(0,b.jsx)("div",{className:"row vertical-form",children:(0,b.jsx)(n.A,{ref:t,config:i,...i})})}),(0,b.jsx)("div",{className:"col-md-12",children:(0,b.jsxs)("div",{className:"d-flex align-item-center justify-content-end mt-3",children:[(0,b.jsx)(r.A,{buttonTypeClassName:"theme-button",onClick:()=>{var i;const l=t.current.getFormData(),s=null===(i=e.smtpRef)||void 0===i?void 0:i.current.getFormData();if(s&&l){if(l.emailTo){const e=l.emailTo.split(",").map((e=>e.trim()));l.emailTo=e.join(";")}let e={...s,...l};a(e)}},buttonText:"Test Outbound Email",isLoading:s}),(0,b.jsx)(r.A,{buttonTypeClassName:"dark-btn ml-5",buttonText:"Cancel",onClick:e.onClose})]})})]})})})};var y=i(67724);const T={label:"Gmail",value:"Gmail"},g=e=>{const t=(0,l.useRef)(),[i,a]=(0,l.useState)(s),[d,g]=(0,l.useState)(0),[,P]=(0,l.useState)(!1),[,N]=(0,l.useState)(!1),[,C]=(0,l.useState)(!0),[x,{isLoading:I,isSuccess:j,data:E}]=(0,o.hK)(),[w,{isFetching:F,isSuccess:A,data:k}]=(0,o.Dj)(),[U,D]=(0,l.useState)(!1),{formSetting:O}=s,_=(0,p.d4)((e=>e.auth.roles.roleName)),[L,Q]=(0,l.useState)(!1);(0,l.useEffect)((()=>{e&&(null!==_&&void 0!==_&&_.includes("Admin")?(D(!1),O.isViewOnly=!1):(D(!0),O.isViewOnly=!0))}),[e,_]),(0,l.useEffect)((()=>{w(),q()}),[]);const q=()=>{let e;e=(0,v.G)(s,["clientId","clientSecret","tenantId"]),B(T,"emailProvider")},M=e=>{switch(e){case"Office365":return["smtpServer","smtpPort","smtpUserName","smtpPassword","useSsl"];case"Gmail":case"Outlook":return["clientId","clientSecret","tenantId"];default:return[]}},B=(e,t)=>{let i={...s};const l=M(e.value);switch(i.formFields=i.formFields.filter((e=>!l.includes(e.id))),i.initialState={...s.initialState},i.initialState.emailProvider=e.value,e.value){case"Gmail":i.initialState.smtpServer="smtp.gmail.com",i.initialState.smtpPort=587;break;case"Outlook":i.initialState.smtpServer="smtp-mail.outlook.com",i.initialState.smtpPort=587}switch(a(i),e.value){case"Office365":P(!0),N(!1),C(!1);break;case"Outlook":N(!0),P(!1),C(!1);break;case"Gmail":C(!0),P(!1),N(!1)}};(0,l.useEffect)((()=>{i.formFields.find((e=>"emailProvider"===e.dataField)).fieldSetting.options=S.BZ}),[]),(0,l.useEffect)((()=>{j&&E&&(m.A.success(E.errorMessage),w())}),[j,E]);(0,l.useEffect)((()=>{if(!F&&A&&k){const e=M(k.emailProvider);let t;e&&(t=(0,v.G)(s,e)),(0,f.t5)(t,"emailprovider",S.fV.DISABLED,!0),t.initialState={emailProvider:null===k||void 0===k?void 0:k.emailProvider,smtpServer:(0,c.je)(k.smtpServer),smtpPort:k.smtpPort,smtpUserName:(0,c.je)(k.smtpUserName),smtpPassword:(0,c.je)(k.smtpPassword),useSsl:k.useSsl,smtpSettingId:k.smtpSettingId,clientId:k.clientId,clientSecret:k.clientSecret,tenantId:k.tenantId},a(t),g(k.smtpSettingId)}}),[F,A,k]);const G={DDL_CHANGED:B};if(F)return(0,b.jsx)("div",{children:(0,b.jsx)(u.A,{})});const R=()=>{Q(!1)};return(0,b.jsxs)("div",{className:"row mt-2 add-address-form",children:[(0,b.jsx)("h4",{className:"organization-tab-title",children:"SMTP Settings"}),(0,b.jsx)(n.A,{config:i,ref:t,...i,onActionChange:G}),e?(0,b.jsx)("div",{className:"col-md-12 mt-2",children:(0,b.jsxs)("div",{className:"d-flex align-item-end justify-content-end",children:[(0,b.jsx)(r.A,{buttonTypeClassName:"theme-button mr-4",buttonText:"Test Outbound Email",onClick:()=>{Q(!0)},isDisable:U}),(0,b.jsx)(r.A,{buttonTypeClassName:"theme-button",buttonText:"Save",onClick:()=>{let e=t.current.getFormData();if(e&&!d||e&&d){let t={...e,emailProvider:e.emailProvider||0,smtpServer:(0,c.r9)(null===e||void 0===e?void 0:e.smtpServer),smtpPort:(null===e||void 0===e?void 0:e.smtpPort)||0,useSsl:e.useSsl,smtpUserName:(0,c.r9)(null===e||void 0===e?void 0:e.smtpUserName)||"",smtpPassword:(0,c.r9)(null===e||void 0===e?void 0:e.smtpPassword)||"",smtpSettingId:d||0,clientId:(null===e||void 0===e?void 0:e.clientId)||"",clientSecret:(null===e||void 0===e?void 0:e.clientSecret)||"",tenantId:(null===e||void 0===e?void 0:e.tenantId)||""};x(t)}},isLoading:I,isDisable:U})]})}):null,(0,b.jsx)(y.A,{showModal:L,handleToggleModal:R,modalTitle:"Test Outbound Email",modelSizeClass:"w-40",children:(0,b.jsx)(h,{onClose:R,smtpRef:t})})]})}}}]);
//# sourceMappingURL=4463.84cfb568.chunk.js.map