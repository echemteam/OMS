"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[6774],{66774:(e,s,a)=>{a.r(s),a.d(s,{default:()=>P});var n=a(27565),i=a(60497),l=a(37204),t=a.n(l),c=a(69885),d=a(79742);const r=[{name:"basicInformation",isCheked:!1},{name:"addressInformation",isCheked:!1},{name:"contactInformation",isCheked:!1},{name:"settingInformation",isCheked:!1},{name:"shippingsettingInformation",isCheked:!1}],o=[{name:"addressInformation",isCheked:!1}],m=[{name:"basicInformation",isCheked:!1},{name:"addressInformation",isCheked:!1},{name:"contactInformation",isCheked:!1},{name:"settingInformation",isCheked:!1}];var h=a(65748),p=a(59617),x=a(5022),u=a(28734),j=a(93906),v=a(67724),f=a(18637),N=a(19045),g=a(4260),b=a(58412),I=a(37792),C=a(96058),S=a(94839),k=a(98389),y=a(45050),A=a(35263),w=a(27929);const T=e=>{let{isModelOpen:s,mainId:a,approvalChekedData:i,handleCheckbox:l}=e;const[t,c]=(0,n.useState)(),[d,r]=(0,n.useState)([]),[o,m]=(0,n.useState)([]),[h,p]=(0,n.useState)([!0]),[x,u]=(0,n.useState)((null===i||void 0===i?void 0:i.isChecked)||!1),[j,{isFetching:v,isSuccess:f,data:N}]=(0,y.aQ)();(0,n.useEffect)((()=>{s&&a&&j(a)}),[s,a]),(0,n.useEffect)((()=>{!v&&f&&N&&(c(N),r(N.deliveryMethodsList.filter((e=>e.isPrimary))),N.shppingDeliveryCarriersList&&m(N.shppingDeliveryCarriersList.filter((e=>e.isPrimary))))}),[v,f,N]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"card-top-title "+(h[0]?"active":""),onClick:()=>(e=>{const s=[...h];s[e]=!s[e],p(s)})(0),children:[(0,w.jsxs)("div",{className:"d-flex align-items-center mr-2",children:[(0,w.jsx)("span",{children:(0,w.jsx)(A.A,{icon:"ep:arrow-down-bold",className:"open-bar"})}),(0,w.jsx)("h5",{children:" Shipping Information "})]}),(0,w.jsx)("div",{className:"checkbox-part",children:(0,w.jsx)(k.A,{name:"shippingsettingInformation",dataField:"shippingsettingInformation",checked:x||!1,onChange:(e,s)=>{u(s),l(e,s)}})})]}),h[0]&&(0,w.jsx)("div",{className:"card-info-checklist",children:t&&(0,w.jsxs)("div",{className:"card-part",children:[(0,w.jsxs)("h6",{className:"name-title",children:[(0,w.jsx)("span",{className:"label",children:"Account Type:"}),(0,w.jsx)("p",{className:"name-desc",style:{color:"var(--themeColor)",fontSize:"var(--commonFont)",fontWeight:"700"},children:t.name})]}),d.length>0&&(0,w.jsx)("h6",{className:"title mt-4 mb-0",children:"Delivery Method Details: "}),d.length>0&&d.map(((e,s)=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"card-part",style:{paddingBottom:"1px"}},s),(0,w.jsxs)("h6",{className:"name-title",children:[(0,w.jsx)("span",{className:"label",children:"Zone:"}),(0,w.jsx)("p",{className:"name-desc",children:e.isForInternational?"International":"Domestic"})]}),(0,w.jsxs)("h6",{className:"name-title",children:[(0,w.jsx)("span",{className:"label",children:"Charge Type:"}),(0,w.jsx)("p",{className:"name-desc",children:e.name})]}),(0,w.jsxs)("h6",{className:"name-title",children:[(0,w.jsx)("span",{className:"label",children:"Charge:"}),(0,w.jsx)("p",{className:"name-desc",children:e.charge})]})]}))),o.length>0&&(0,w.jsx)("h6",{className:"title mt-4 mb-0",children:"Carrier Details: "}),o.length>0&&o.map(((e,s)=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"card-part",style:{paddingBottom:"1px"}},s),(0,w.jsxs)("h6",{className:"name-title",children:[(0,w.jsx)("span",{className:"label",children:"Carrier:"}),(0,w.jsx)("p",{className:"name-desc",children:e.carrier})]}),(0,w.jsxs)("h6",{className:"name-title",children:[(0,w.jsx)("span",{className:"label",children:"AccountNumber:"}),(0,w.jsx)("p",{className:"name-desc",children:e.accountNumber})]})]})))]})})]})};var F=a(3514),D=a(1933),E=a(69377);const M=e=>{let{mainId:s,isSupplierApproval:a,onGetByIdNotes:i}=e;const[l,t]=(0,n.useState)(),[c,d]=(0,n.useState)(),[r,{isFetching:o,isSuccess:m,data:h}]=i(),[p,{isFetching:x,isSuccess:u,data:j}]=(0,y.mI)(),[v,f]=(0,n.useState)([!0]),[N,g]=(0,n.useState)([!0]);(0,n.useEffect)((()=>{s&&(r(s),p(s))}),[s]),(0,n.useEffect)((()=>{!x&&u&&j&&null!==j&&void 0!==j&&j.invoiceSubmissionInstruction&&d(j.invoiceSubmissionInstruction)}),[x,u,j]),(0,n.useEffect)((()=>{if(!o&&m&&h&&(null===h||void 0===h?void 0:h.length)>0){const e=h[0];t(e.note)}}),[o,m,h]);return(0,w.jsxs)(w.Fragment,{children:[!a&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"card-top-title "+(v[0]?"active":""),onClick:()=>(e=>{const s=[...v];s[e]=!s[e],f(s)})(0),children:(0,w.jsxs)("div",{className:"d-flex align-items-center mr-2",children:[(0,w.jsx)("span",{children:(0,w.jsx)(A.A,{icon:"ep:arrow-down-bold",className:"open-bar"})}),(0,w.jsx)("h5",{children:"Invoice Submission Instruction"})]})}),v[0]&&(0,w.jsx)("div",{className:"card-info-checklist",children:(0,w.jsx)("div",{className:"pt-2",children:c?(0,w.jsx)("span",{className:"validation-msg",dangerouslySetInnerHTML:{__html:c}}):(0,w.jsx)(E.A,{})})})]}),(0,w.jsx)("div",{className:"card-top-title "+(N[0]?"active":""),onClick:()=>(e=>{const s=[...N];s[e]=!s[e],g(s)})(0),children:(0,w.jsxs)("div",{className:"d-flex align-items-center mr-2",children:[(0,w.jsx)("span",{children:(0,w.jsx)(A.A,{icon:"ep:arrow-down-bold",className:"open-bar"})}),(0,w.jsx)("h5",{children:" Notes "})]})}),N[0]&&(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"card-info-checklist",children:(0,w.jsx)("div",{className:"pt-2",children:l?(0,w.jsx)("span",{className:"validation-msg",dangerouslySetInnerHTML:{__html:l}}):(0,w.jsx)(E.A,{})})})})]})},R=n.lazy((()=>a.e(8668).then(a.bind(a,88668)))),B=n.lazy((()=>a.e(5698).then(a.bind(a,95698)))),L=n.lazy((()=>a.e(3262).then(a.bind(a,53262)))),O=n.lazy((()=>a.e(378).then(a.bind(a,60378)))),z=n.lazy((()=>a.e(8998).then(a.bind(a,18998)))),P=e=>{let{isModelOpen:s,onSidebarClose:a,onSuccessApprovalClose:l,mainId:k,getBasicInformationById:y,getAddressById:A,getContactById:E,getFinacialSettingById:P,isSupplierApproval:U,isSubCustomer:J,ownerType:_,basicData:G,setRejectStatusId:H,setSelectedStatus:$,onRejectedCustomerFromApproval:q,OnRejectedSupplierFromApproval:K}=e;const Q=(0,n.useRef)(),[W,X]=(0,n.useState)(!1),[Z,V]=(0,n.useState)(N.n),[Y,ee]=(0,n.useState)([]),[se,ae]=(0,n.useState)([]),[ne,ie]=(0,n.useState)(null),[,le]=(0,n.useState)(!1),[te,ce]=(0,n.useState)(null),[de,re]=(0,n.useState)([]),[oe,me]=(0,n.useState)(null),[he,pe]=(0,n.useState)((()=>U?U?m:void 0:J?o:r)),[xe,{isSuccess:ue,data:je}]=(0,x.KJ)(),[ve]=(0,C.f8)(),[fe]=(0,F.Tm)(),[Ne]=(0,g.ks)(),[ge]=(0,D.qP)(),[be,{isLoading:Ie,isSuccess:Ce,data:Se}]=(0,g.jb)(),[ke,{isLoading:ye,isSuccess:Ae,data:we}]=(0,D.j5)(),[Te,{isFetching:Fe,isSuccess:De,data:Ee}]=(0,x.Jx)(),[Me,{isFetching:Re,isSuccess:Be,data:Le}]=(0,j.zR)();if((0,n.useEffect)((()=>{if(xe(),W&&G){const e=null===G||void 0===G?void 0:G.map((e=>Number(e.trim()))),s={...Z};s.initialState={...s.initialState,responsibleUserId:e},V(s)}}),[W]),ue&&je){const e=je.filter((e=>null===e.roleName||!I.hN.map((e=>e.toLowerCase())).includes(e.roleName.toLowerCase()))),s=Array.from(new Map(e.map((e=>[e.fullName,e]))).values());(0,b.Xh)(s,"userId","fullName",N.n,"responsibleUserId")}const Oe=(e,s)=>{const a=he.map((a=>a.name===e?{...a,isCheked:s}:a));ee(a),pe(a)};(0,n.useEffect)((()=>{Ae&&we&&(h.A.success(we.errorMessage),Pe())}),[Ae,we]),(0,n.useEffect)((()=>{Ce&&Se&&(h.A.success(Se.errorMessage),Pe(),U?K():q())}),[Ce,Se]);const ze=e=>{if(U){let s={supplierId:k,userId:String(e)};ge(s)}else{let s={customerId:k,userId:String(e)};Ne(s)}};(0,n.useEffect)((()=>{if(k){Te({ownerId:k,ownerType:_})}}),[k]),(0,n.useEffect)((()=>{if(!Re&&Be&&Le){const e=Le.fileData,s=new Blob([e],{type:e.type}),a=URL.createObjectURL(s);"view"===oe&&(ce(a),re(Ue(Le.fileName)))}}),[Re,Be,Le]),(0,n.useEffect)((()=>{if(!Fe&&De&&Ee){const e=Ee.map((e=>({value:e.documentId,label:e.name,attachment:e.attachment})));ae(e)}}),[Fe,De,Ee]);const Pe=()=>{X(!1),a()},Ue=e=>{switch(e.split(".").pop().toLowerCase()){case"pdf":return"pdf";case"docx":return"docx";case"ppt":case"pptx":return"pptx";case"xlsx":return"xlsx";case"csv":return"csv";case"xls":return"xls";case"doc":return"doc";default:return null}},Je=(e,s,a)=>{ce(null),le(!1),me(e);let n={folderName:U?u.Dh.SUPPLIER:u.Dh.CUSTOMER,keyId:k,fileName:s};"view"===e&&Me(n)};return(0,w.jsx)("div",{children:s&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.default,{modalTitle:"Approval Check List",contentClass:"content-95 basic-info-model",onClose:a,modalTitleIcon:c.m.AddIcon,isOpen:s,children:(0,w.jsx)("div",{className:"checklist-left-section",children:(0,w.jsxs)("div",{className:"row mt-3",children:[(0,w.jsxs)("div",{className:"col-6 info-scrollable",children:[(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("div",{className:"col-12 mb-3",children:(0,w.jsxs)("div",{className:"row",children:[(0,w.jsxs)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:[(0,w.jsx)("div",{className:"approval-list-part",children:(0,w.jsx)(R,{isModelOpen:s,mainId:k,getBasicInformationById:y,approvalChekedData:he.find((e=>"basicInformation"===e.name)),handleCheckbox:Oe,isSupplierApproval:U})}),J?null:(0,w.jsx)("div",{className:"col-12 mb-3",children:(0,w.jsx)("div",{className:"approval-list-part",children:(0,w.jsx)(L,{isSupplierApproval:U,isModelOpen:s,mainId:k,getContactById:E,approvalChekedData:he.find((e=>"contactInformation"===e.name)),handleCheckbox:Oe})})}),(0,w.jsx)("div",{className:"col-12 mb-3",children:(0,w.jsx)("div",{className:"approval-list-part",children:(0,w.jsx)(M,{mainId:k,isSupplierApproval:U,onGetByIdNotes:U?F.z1:C.Is})})})]}),(0,w.jsxs)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:[(0,w.jsx)("div",{className:"approval-list-part",children:(0,w.jsx)(B,{isSupplierApproval:U,isModelOpen:s,mainId:k,getAddressById:A,isSubCustomer:J,approvalChekedData:he.find((e=>"addressInformation"===e.name)),handleCheckbox:Oe})}),J||U?null:(0,w.jsx)("div",{className:"col-12 mb-3",children:(0,w.jsx)("div",{className:"approval-list-part",children:(0,w.jsx)(O,{isSupplierApproval:U,isModelOpen:s,mainId:k,getFinacialSettingById:P,approvalChekedData:he.find((e=>"settingInformation"===e.name)),handleCheckbox:Oe})})}),J||U?null:(0,w.jsx)("div",{className:"col-12 mb-3",children:(0,w.jsx)("div",{className:"approval-list-part",children:(0,w.jsx)(T,{isSupplierApproval:U,isModelOpen:s,mainId:k,getFinacialSettingById:P,approvalChekedData:he.find((e=>"shippingsettingInformation"===e.name)),handleCheckbox:Oe})})}),U?(0,w.jsx)("div",{className:"col-12 mb-3",children:(0,w.jsx)("div",{className:"approval-list-part",children:(0,w.jsx)(z,{isSupplierApproval:U,isModelOpen:s,mainId:k,getFinacialSettingById:P,approvalChekedData:he.find((e=>"settingInformation"===e.name)),handleCheckbox:Oe})})}):null]})]})}),(0,w.jsx)("div",{className:"col-12 mb-3"})]}),(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col-md-12 my-3 mt-4",children:(0,w.jsx)("div",{className:"d-flex align-item-end justify-content-end",children:(0,w.jsxs)("div",{className:"d-flex align-item-end",children:[(0,w.jsx)(i.A,{buttonTypeClassName:"theme-button",buttonText:"Approve",onClick:()=>{const e=Y.every((e=>e.isCheked));Y.length>0&&e?l():h.A.warning("Please ensure that all data has been thoroughly reviewed.")}}),(0,w.jsx)(i.A,{buttonTypeClassName:"danger-btn ml-5",buttonText:"Reject",onClick:()=>{X(!0)}}),(0,w.jsx)(i.A,{buttonTypeClassName:"dark-btn ml-5",buttonText:"Cancel",onClick:a})]})})})})]}),(0,w.jsxs)("div",{className:"col-6 right-document-view",children:[(0,w.jsx)("div",{className:"checklist-info",children:(0,w.jsx)("h5",{children:"Documents"})}),(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col-8",children:(0,w.jsx)(p.default,{placeholder:"Select Documents",options:se,value:ne,onChange:e=>{ie(e.value),Je("view",e.attachment)}})})}),(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col-12",children:(0,w.jsx)("div",{className:"document-view",children:te&&de?"pdf"===de?(0,w.jsx)("div",{className:"pdf-iframe",children:(0,w.jsx)("iframe",{src:te,title:"PDF Preview",style:{width:"100%",height:"200%"}})}):(0,w.jsx)(t(),{fileType:de,filePath:te,onError:e=>console.error("Error:",e)}):null})})})]})]})})}),(0,w.jsx)(v.A,{showModal:W,handleToggleModal:Pe,modalTitle:"Reject Reason",modelSizeClass:"w-50s",children:(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)(f.A,{config:Z,ref:Q,...Z}),(0,w.jsx)("div",{className:"col-md-12 mt-2",children:(0,w.jsx)("div",{className:"d-flex align-item-end justify-content-end",children:(0,w.jsxs)("div",{className:"d-flex align-item-end",children:[(0,w.jsx)(i.A,{buttonTypeClassName:"theme-button",buttonText:"Update",isLoading:U?ye:Ie,onClick:()=>{if(U){let e=Q.current.getFormData();if(e){let s={...e,supplierId:k,statusId:u.J$.REJECT,note:e.inActiveReason};ke(s),ze(e.responsibleUserId),fe(s),$(S.Rm.Reject),H(s.statusId)}}else{let e=Q.current.getFormData();if(e){let s={...e,customerId:k,statusId:u.J$.REJECT,note:e.inActiveReason};be(s),ze(e.responsibleUserId),ve(s)}}}}),(0,w.jsx)(i.A,{buttonTypeClassName:"dark-btn ml-5",buttonText:"Cancel",onClick:Pe})]})})})]})})]})})}}}]);
//# sourceMappingURL=6774.9649c355.chunk.js.map