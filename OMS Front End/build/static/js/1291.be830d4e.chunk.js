"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1291],{11291:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var i=n(27565),l=n(17295),o=n(15335),a=n(79663);const c={initialState:{authKey:"",clientId:"",clientSecret:"",tokenEndpoint:"",tokenExpires:""},formFields:[{id:"authKey",lable:"AuthKey ",Field_Name:"authKey",fieldType:o.Q.INPUT,dataField:"authKey",fieldSetting:{placeholder:"Enter AuthKey",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-12 col-xl-12 col-md-12 col-12 mb-2 "}},{id:"clientId",lable:"Client Id",Field_Name:"Client Id",fieldType:o.Q.INPUT,dataField:"clientId",fieldSetting:{placeholder:"Enter ClientId",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-12 col-xl-12 col-md-12 col-12 mb-2"}},{id:"clientSecret",lable:"Client Secret",Field_Name:"Client Secret",fieldType:o.Q.INPUT,dataField:"clientSecret",fieldSetting:{placeholder:"Enter Client Secret",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-12 col-xl-12 col-md-12 col-12 mb-2"}},{id:"tokenEndpoint",lable:"Token Endpoint",Field_Name:"Token Endpoint",fieldType:o.Q.INPUT,dataField:"tokenEndpoint",fieldSetting:{placeholder:"Enter Token Endpoint",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-12 col-xl-12 col-md-12 col-12 mb-2"}},{id:"tokenExpires",lable:"Token Expires Date",Field_Name:"TokenExpires",fieldType:o.Q.DATEPICKER,dataField:"tokenExpires",fieldSetting:{placeholder:"Select Expire Date",allowSpace:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-12 col-xl-12 col-md-12 mb-2"}}],formSetting:{isViewOnly:!1}},d={columns:[{name:"AuthKey",fieldName:"authKey",colStyle:{width:"15%"},allowShort:!0},{name:"ClientId",fieldName:"clientId",colStyle:{width:"25%"},allowShort:!0},{name:"Client Secret",fieldName:"clientSecret",colStyle:{width:"15%"},allowShort:!0},{name:"Token Endpoint",fieldName:"tokenEndpoint",colStyle:{width:"20%"},allowShort:!0},{name:"Token Expires",fieldName:"tokenExpires",colStyle:{width:"20%"},colType:a.f.DATE,allowShort:!0,colSettings:{format:"DD/MM/YYYY"}},{name:"Action",colStyle:{width:"10%"},colType:a.f.ACTION,defaultAction:{allowEdit:!0,allowDelete:!0}}]};var r=n(65748),s=n(80889),u=n(34501),p=n(62360),h=n(27929);const S=e=>{let{handleEditClick:t,getDataRef:n,providerId:l,handleListData:o}=e;const a=(0,i.useRef)(),[c,S]=(0,i.useState)(),[f,m]=(0,i.useState)(0),{confirm:E}=(0,s.A)(),[x,{isSuccess:I,data:g}]=(0,u.Ol)(),[C,{isLoading:y,isSuccess:v,data:k}]=(0,u.IE)();(0,i.useEffect)((()=>{b()}),[]),(0,i.useEffect)((()=>{v&&k&&(k&&(S(k.dataSource),o(k.dataSource.length)),k.totalRecord&&m(k.totalRecord))}),[v,k]),(0,i.useEffect)((()=>{if(I&&g){r.A.success(g.errorMessage);const e=a.current.getCurrentPageObject();A(e)}}),[I,g]);const T=(e,t)=>{const n={pagination:{pageNumber:e.pageNumber,pageSize:e.pageSize},filters:{searchText:""},sortString:t,providerId:l};C(n)},A=e=>{T(e,a.current.generateSortingString())},b=()=>{if(a.current){const e=a.current.getCurrentPageObject();T(e,a.current.generateSortingString())}},w={EDIT:t,DELETE:e=>{E("Delete?","Are you sure you want to Delete?","Delete","Cancel").then((t=>{t&&x(e.authId)}))}};return(0,i.useImperativeHandle)(n,(()=>({callChildFunction:b}))),(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-md-12 table-striped api-provider pagination-none first-word-break api-management",children:(0,h.jsx)(p.A,{ref:a,configuration:d,dataSource:c,allowPagination:!0,pagination:{totalCount:f,pageSize:20,currentPage:1},onPageChange:A,onSorting:e=>{T(a.current.getCurrentPageObject(),e)},isLoading:y,onActionChange:w})})})};var f=n(79742),m=n(15889),E=n(58412),x=n(18637),I=n(60497),g=n(28734),C=n(32813);const y=e=>{const t=(0,i.useRef)(),n=e.authId,[l,o]=(0,i.useState)(c),[a,{isLoading:d,isSuccess:s,data:p}]=(0,u.ux)(),[S,{isFetching:f,isSuccess:y,data:v}]=(0,u.Qd)();(0,i.useEffect)((()=>{let t={...c};n&&e.isEdit?(o(t),S(n)):k()}),[n,S,e.isEdit,e.isModelOpen]),(0,i.useEffect)((()=>{if(y&&v&&!f){const e={[null===g.C9||void 0===g.C9?void 0:g.C9.OAuth]:["authKey"],[null===g.C9||void 0===g.C9?void 0:g.C9.APIKey]:["clientSecret","clientId","tokenExpires","tokenEndpoint"]};let t={...l};const n=e[v.authenticationType];n&&(t=(0,m.G)(t,n)),(0,E.t5)(t,"providerId",g.fV.DISABLED,!0);const i={authId:v.authId,providerId:v.providerId,authKey:v.authKey,clientId:v.clientId,clientSecret:v.clientSecret,tokenEndpoint:v.tokenEndpoint,tokenExpires:v.tokenExpires};n.forEach((e=>{delete i[e]}));const a={...t,initialState:i};o(a)}}),[y,v,f]),(0,i.useEffect)((()=>{s&&p&&(e.onSuccess(),r.A.success(p.errorMessage),e.onClose())}),[s,p]);const k=()=>{if(e.providerId){const t=e.providerData;let n={...c};const i={[g.C9.OAuth]:["authKey"],[g.C9.APIKey]:["clientSecret","clientId","tokenExpires","tokenEndpoint"]}[t.authenticationType];i&&(n=(0,m.G)(n,i)),o(n)}},T=()=>{let e={...c};(0,E.t5)(e,"providerId",g.fV.DISABLED,!1),(0,C.t)(e,o,null)};return(0,i.useImperativeHandle)(e.childRef,(()=>({callChildFunction:T}))),(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsx)("div",{className:"row vertical-form",children:(0,h.jsx)(x.A,{ref:t,config:l,...l})})}),(0,h.jsx)("div",{className:"col-md-12 mt-2",children:(0,h.jsxs)("div",{className:"d-flex align-item-center justify-content-end",children:[(0,h.jsx)(I.A,{buttonTypeClassName:"theme-button",buttonText:e.isEdit?"Update":"Save",onClick:()=>{const i=t.current.getFormData();if(i){const t={...i,providerId:e.providerId,tokenExpires:i.tokenExpires?i.tokenExpires:null,...n&&{authId:n}};a(t)}},isLoading:d}),(0,h.jsx)(I.A,{buttonTypeClassName:"dark-btn ml-5",buttonText:"Cancel",onClick:e.onClose})]})})]})})};var v=n(69885);const k=e=>{let{providerId:t,providerObject:n}=e;const o=(0,i.useRef)(),a=(0,i.useRef)(),[c,d]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1),[u,p]=(0,i.useState)(!1),[m,E]=(0,i.useState)(0),x=()=>{d(!1),s(!1),o.current&&o.current.callChildFunction()};return(0,h.jsxs)("div",{children:[(0,h.jsx)(l.default,{cardTitle:"API Authentication",buttonClassName:"btn theme-button",rightButton:1!==m&&!0,buttonText:"Add",textWithIcon:!0,iconImg:v.m.PlusIcon,titleButtonClick:()=>{d(!0)},children:(0,h.jsx)(S,{providerId:t,getDataRef:a,handleEditClick:e=>{p(e.authId),s(!0),d(!0)},handleListData:e=>{E(e)}})}),(0,h.jsx)(f.default,{modalTitle:r?"Upadte API Authentication":"Add API Authentication",contentClass:"content-40",onClose:x,modalTitleIcon:v.m.AddIcon,isOpen:c,children:(0,h.jsx)(y,{isEdit:r,providerId:t,providerData:n,authId:u,onClose:x,onSuccess:()=>{a.current&&a.current.callChildFunction(),d(!1)},isModelOpen:c,childRef:o})})]})}}}]);
//# sourceMappingURL=1291.be830d4e.chunk.js.map