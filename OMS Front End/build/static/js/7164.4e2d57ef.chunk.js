"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7164],{7164:(e,s,i)=>{i.r(s),i.d(s,{default:()=>y});var n=i(27565),a=i(55795),l=i(35263),t=i(27929);const c=e=>{var s,i,c;let{emailAddressesList:o,isOptionsOpen:d}=e,r=null===o||void 0===o?void 0:o.filter((e=>!1===e.isPrimary)),m=null===o||void 0===o?void 0:o.find((e=>!0===e.isPrimary));return!m&&o&&o.length>0&&(m=o[0],r=r.slice(1)),(0,t.jsxs)(n.Fragment,{children:[(0,t.jsxs)("div",{className:"dropdown-desc-sec",children:[(0,t.jsx)("div",{className:"icon-part",title:"Home",children:(0,t.jsx)("i",{className:"fa fa-envelope"})}),(0,t.jsx)("div",{className:"desc-part",children:null!==(s=m)&&void 0!==s&&s.emailAddress?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"values",children:null===(i=m)||void 0===i?void 0:i.emailAddress}),(0,t.jsx)("span",{className:"copy-icon "+(d&&null!==(c=m)&&void 0!==c&&c.isPrimary?"primary-email":""),children:(0,t.jsx)("div",{className:"copy",style:{cursor:"pointer"},onClick:()=>{var e;return(0,a.A)(null===(e=m)||void 0===e?void 0:e.emailAddress,"email")},children:(0,t.jsx)(l.A,{icon:"bitcoin-icons:copy-outline"})})})]}):null})]}),d?(0,t.jsx)(t.Fragment,{children:r.map(((e,s)=>(0,t.jsxs)("span",{className:"contact-list d-flex flex-row",children:[(0,t.jsx)("span",{children:null===e||void 0===e?void 0:e.emailAddress}),(0,t.jsx)("span",{className:"copy-icon",title:"Copy",style:{cursor:"pointer"},onClick:()=>(0,a.A)(null===e||void 0===e?void 0:e.emailAddress,"email"),children:(0,t.jsx)(l.A,{icon:"bitcoin-icons:copy-outline"})})]},s)))}):null]})},o=e=>{var s,i,c,o,d,r,m,p;let{phoneNumberList:u,isOptionsOpen:h}=e,x=u.filter((e=>!1===e.isPrimary)),v=u.find((e=>!0===e.isPrimary));!v&&u&&u.length>0&&(v=u[0],x=x.slice(1));const N=e=>{switch(e){case 1:return(0,t.jsx)("span",{className:"contact-type-icon",title:"Home",children:(0,t.jsx)("i",{className:"fa fa-home"})});case 2:return(0,t.jsx)("span",{className:"contact-type-icon",title:"Work",children:(0,t.jsx)("i",{className:"fa fa-briefcase"})});case 3:return(0,t.jsx)("span",{className:"contact-type-icon",title:"Mobile",children:(0,t.jsx)("i",{className:"fa fa-mobile"})});default:return null}};return(0,t.jsxs)(n.Fragment,{children:[(0,t.jsx)("div",{className:"contact-sec",children:(0,t.jsx)("div",{className:"number-list",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"number-type",children:N(null===(s=v)||void 0===s?void 0:s.phoneTypeId)}),(0,t.jsx)("div",{className:"card-value ml-0 "+(null!==(i=v)&&void 0!==i&&i.isPrimary,""),children:`(${null===(c=v)||void 0===c?void 0:c.phoneCode}) ${null===(o=v)||void 0===o?void 0:o.phoneNumber}`}),(0,t.jsx)("div",{className:"card-value "+(h&&null!==(d=v)&&void 0!==d&&d.isPrimary?"primary-phone":""),children:""+((null===(r=v)||void 0===r?void 0:r.extension)>0?","+(null===(m=v)||void 0===m?void 0:m.extension):"")}),null!==(p=v)&&void 0!==p&&p.isPrimary?(0,t.jsx)("div",{className:"primary-icon",title:"Is Primary"}):null,(0,t.jsx)("span",{className:"copy-icon",title:"Copy",style:{cursor:"pointer"},onClick:()=>(0,a.A)(`(${v.phoneCode}) ${v.phoneNumber} \n                ${v.extension>0?v.extension:""}`,"phone"),children:(0,t.jsx)(l.A,{icon:"bitcoin-icons:copy-outline"})})]}):null})}),h?(0,t.jsx)(t.Fragment,{children:x.map(((e,s)=>(0,t.jsxs)("span",{className:"contact-list d-flex flex-row",children:[(0,t.jsxs)("span",{className:"number-list",children:[N(null===e||void 0===e?void 0:e.phoneTypeId),(0,t.jsx)("span",{className:"",children:`(${e.phoneCode}) ${e.phoneNumber}${e.extension?`, ${e.extension}`:""}`})]}),(0,t.jsx)("span",{className:"copy-icon",title:"Copy",style:{cursor:"pointer"},onClick:()=>(0,a.A)(`(${e.phoneCode}) ${e.phoneNumber} ${e.extension>0?e.extension:""}`,"phone"),children:(0,t.jsx)(l.A,{icon:"bitcoin-icons:copy-outline"})})]},s)))}):null]})};var d=i(60497),r=i(18637);const m={name:"Contact",initialState:{contactTypeId:""},formFields:[{id:"contactTypeId",lable:"Contact Type ",Field_Name:"Contact Type",fieldType:i(15335).Q.SELECT,dataField:"contactTypeId",fieldSetting:{placeholder:"Select Contact Type",isMultiSelect:!0,isDisabled:!1,isEnableOnChange:!0},validation:[{type:"require"}],style:{containerCss:"col-xxl-8 col-xl-8 col-md-12 col-12 col-12 mb-input"}}],formSetting:{isViewOnly:!1}};var p=i(67724),u=i(3737),h=i(58412),x=i(65748),v=i(52085);const N=e=>{let{cloneRef:s,isSupplier:i,onGetContactList:a,getCompletionCount:l}=e;const c=(0,n.useRef)(),[o,N]=(0,n.useState)(),[j,y]=(0,n.useState)(!1),[b,{isSuccess:f,data:g}]=(0,v.sD)(),[A,{isLoading:C,isSuccess:L,data:w}]=(0,v.yv)();(0,n.useEffect)((()=>{b()}),[b]),(0,n.useEffect)((()=>{if(f&&g){const e=e=>i?e.isForSuppliers:e.isForCustomers;(0,h.Xh)(g,"contactTypeId","type",m,"contactTypeId",e)}}),[f,g]),(0,n.useEffect)((()=>{if(L&&w){if(w.errorMessage.includes("EXISTS"))return void x.A.warning(w.errorMessage);a&&(a(),y(!j),x.A.success(w.errorMessage)),l&&l()}}),[L,w]);const I=()=>{y(!j)},T=e=>{N(e),y(!j)};return(0,n.useImperativeHandle)(s,(()=>({callChildFunction:T}))),(0,t.jsx)(p.A,{showModal:j,handleToggleModal:I,modalTitle:"Clone Contact",modelSizeClass:"w-40",children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-12 add-edit-emailAddressForm",children:(0,t.jsx)("div",{className:"row vertical-form add-edit-contactForm",children:(0,t.jsx)(r.A,{config:m,ref:c})})}),(0,t.jsx)("div",{className:"col-md-12 mt-2",children:(0,t.jsxs)("div",{className:"d-flex align-item-center justify-content-end",children:[(0,t.jsx)(d.A,{buttonTypeClassName:"theme-button",buttonText:"Save",isLoading:C,onClick:()=>{const e=c.current.getFormData();if(e&&o){const s=(0,u.H)(e.contactTypeId);let n={...o,contactTypeId:s,[i?"supplierContactId":"customerContactId"]:0,contactId:0,emailAddressList:o.emailAddressList.map((e=>({emailAddress:e.emailAddress,isPrimary:e.isPrimary}))),phoneNumberList:o.phoneNumberList.map((e=>({extension:e.extension,isPrimary:e.isPrimary,phoneCode:e.phoneCode,phoneNumber:e.phoneNumber,phoneType:e.phoneType,phoneTypeId:e.phoneTypeId})))};A(n)}}}),(0,t.jsx)(d.A,{buttonTypeClassName:"dark-btn ml-5",buttonText:"Cancel",onClick:I})]})})]})})};var j=i(15269);const y=(0,n.forwardRef)(((e,s)=>{var i,a,d,r,m,p,u,h,x,v,y,b;let{contactItem:f,handleEdit:g,showEditIcon:A,openModalId:C,setOpenModalId:L,isSupplier:w,onGetContactList:I,getCompletionCount:T,isEditablePage:S,SecurityKey:P}=e;const E=(0,n.useRef)(),k=(0,n.useRef)(null),F=(0,n.useRef)(null),[O,$]=(0,n.useState)(!1),[M,D]=(0,n.useState)(!1),[R,U]=(0,n.useState)(!1),[H,G]=(0,n.useState)(!1),V=e=>{k.current&&!k.current.contains(e.target)&&G(!1),F.current&&!F.current.contains(e.target)&&U(!1)};(0,n.useEffect)((()=>(document.addEventListener("mousedown",V),()=>{document.removeEventListener("mousedown",V)})),[]),(0,n.useEffect)((()=>{if(S&&P){const e=(0,j.T)(P.EDIT);e&&(!0===e.isViewOnly?D(!0):D(!1))}}),[S,P]);const z=e=>{switch(e){case"Primary":return"badge-primary contact-badge";case"EndUser":case"Accounts Receivable":return"badge-endUser contact-badge";case"Purchasing":case"Purchase Order":return"badge-purchasing contact-badge";case"Invoice Submission":case"QC department":return"badge-submission contact-badge";case"Invoice Follow-up":case"Sales Department":return"badge-followup contact-badge";case"AP":return"badge-ap contact-badge";default:return"badge-default"}},B=()=>{L(f.contactId===C?null:f.contactId),$(!O)},K=e=>{e.target.closest(".right-action-icon")||$(!1)};(0,n.useEffect)((()=>(O?document.body.addEventListener("click",K):document.body.removeEventListener("click",K),()=>{document.body.removeEventListener("click",K)})),[O]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"contact-main-card-section d-none",children:(0,t.jsxs)("div",{className:"contact-card "+(H||R?"dropdown-open":""),children:[(0,t.jsxs)("div",{className:"contact-card-desc",children:[(0,t.jsxs)("div",{className:"contact-info",children:[(0,t.jsx)("span",{className:"user-icon",children:(0,t.jsx)("i",{className:"fa fa-user"})}),(0,t.jsxs)("div",{className:"contact-name",children:[(0,t.jsx)("span",{className:"contact-title",children:(0,t.jsx)("b",{children:f.firstName+" "+f.lastName})}),f.isPrimary&&(0,t.jsx)("span",{className:"primary-card",children:" Primary "})]}),(0,t.jsxs)("div",{className:"right-action-icon",children:[(0,t.jsxs)("div",{className:"edit-view-icon",children:[(0,t.jsx)("div",{className:"edit-delete-button",children:A?(0,t.jsx)("button",{onClick:()=>g(null===f||void 0===f?void 0:f.contactId),className:"edit-btn",children:(0,t.jsx)(l.A,{icon:"tabler:pencil"})}):null}),(0,t.jsx)("span",{className:"option-icon",role:"button",tabIndex:"0",onClick:B,children:(0,t.jsx)(l.A,{icon:"mdi:ellipsis-vertical"})})]}),(0,t.jsxs)("div",{ref:s,className:"customer-detail-model "+(C===f.contactId?"open-model":""),children:[(0,t.jsxs)("div",{className:"customer-card-top-sec",children:[(0,t.jsx)("div",{className:"profile-icon",children:(0,t.jsx)("span",{className:"profile-text",children:f.firstName&&f.lastName?f.firstName.charAt(0).toUpperCase()+f.lastName.charAt(0).toUpperCase():""})}),(0,t.jsx)("div",{className:"profile-name",children:f.firstName+" "+f.lastName})]}),(0,t.jsxs)("div",{className:"bottom-contact-desc",children:[(null===(i=f.emailAddressList)||void 0===i?void 0:i.length)>0?(0,t.jsx)("div",{className:"contact-part",children:(0,t.jsxs)("div",{className:"contact-type-list",children:[(0,t.jsx)("i",{className:"fa fa-envelope-o"}),(0,t.jsx)("ul",{children:(0,t.jsx)("li",{children:(null===(a=f.emailAddressList)||void 0===a?void 0:a.length)>0?(0,t.jsx)(c,{isOptionsOpen:O,emailAddressesList:f.emailAddressList}):null})})]})}):null,(null===(d=f.phoneNumberList)||void 0===d?void 0:d.length)>0?(0,t.jsx)("div",{className:"contact-part",children:(0,t.jsx)("div",{className:"contact-type-list",children:(0,t.jsx)("ul",{className:"number-list",children:(0,t.jsx)("li",{children:(null===(r=f.phoneNumberList)||void 0===r?void 0:r.length)>0?(0,t.jsx)(o,{isOptionsOpen:O,phoneNumberList:f.phoneNumberList}):null})})})}):null]})]})]})]}),(0,t.jsxs)("div",{className:"contact-details",children:[(0,t.jsx)("div",{className:"dropdown-sec",children:(null===(m=f.emailAddressList)||void 0===m?void 0:m.length)>0?(0,t.jsx)(c,{emailAddressesList:f.emailAddressList}):null}),(0,t.jsx)("div",{className:"dropdown-sec",children:(null===(p=f.phoneNumberList)||void 0===p?void 0:p.length)>0?(0,t.jsx)(o,{phoneNumberList:f.phoneNumberList}):null})]})]}),(0,t.jsx)("div",{className:`contact-type-badge ${z(f.type)}`,children:f.type}),(0,t.jsx)("div",{className:"edit-delete-button",children:A?(0,t.jsx)("button",{onClick:()=>g(null===f||void 0===f?void 0:f.contactId),className:"edit-btn",children:(0,t.jsx)(l.A,{icon:"tabler:pencil"})}):null})]})}),(0,t.jsx)("div",{className:"contact-main-card-section",children:(0,t.jsxs)("div",{className:"card-section-body",children:[(0,t.jsxs)("div",{className:"top-profile-section",children:[(0,t.jsxs)("div",{className:"profile-sec",children:[(0,t.jsx)("span",{className:"profile-icon",children:f.firstName&&f.lastName?f.firstName.charAt(0).toUpperCase()+f.lastName.charAt(0).toUpperCase():""}),(0,t.jsx)("span",{className:"contact-name",children:f.firstName+" "+f.lastName}),f.isPrimary&&(0,t.jsx)("span",{className:"primary-card",children:" Primary "})]}),(0,t.jsxs)("div",{className:"right-action-icon",children:[(0,t.jsxs)("div",{className:"edit-view-icon",children:[(0,t.jsx)("div",{className:"d-flex edit-delete-button",children:A?(0,t.jsxs)(t.Fragment,{children:[!M&&(0,t.jsx)("button",{onClick:()=>(e=>{E.current&&E.current.callChildFunction(e)})(f),className:"edit-btn",children:(0,t.jsx)(l.A,{icon:"clarity:clone-line"})}),(0,t.jsx)("button",{onClick:()=>g(null===f||void 0===f?void 0:f.contactId),className:"edit-btn ml-1",children:(0,t.jsx)(l.A,{icon:"tabler:pencil"})})]}):null}),(0,t.jsx)("span",{className:"option-icon",role:"button",tabIndex:"0",onClick:B,children:(0,t.jsx)(l.A,{icon:"mdi:ellipsis-vertical"})})]}),(0,t.jsxs)("div",{ref:s,className:"customer-detail-model "+(C===f.contactId?"open-model":""),children:[(0,t.jsxs)("div",{className:"customer-card-top-sec",children:[(0,t.jsx)("div",{className:"profile-icon",children:(0,t.jsx)("span",{className:"profile-text",children:f.firstName&&f.lastName?f.firstName.charAt(0).toUpperCase()+f.lastName.charAt(0).toUpperCase():""})}),(0,t.jsx)("div",{className:"profile-name",children:f.firstName+" "+f.lastName})]}),(0,t.jsxs)("div",{className:"bottom-contact-desc",children:[(null===(u=f.emailAddressList)||void 0===u?void 0:u.length)>0?(0,t.jsxs)("div",{className:"contact-part",children:[(0,t.jsxs)("div",{className:"type-title",children:[(0,t.jsx)("i",{className:"fa fa-envelope-o"}),(0,t.jsx)("span",{className:"contact-type-title",children:"Email Address"})]}),(0,t.jsx)("div",{className:"contact-type-list",children:(0,t.jsx)("ul",{children:(0,t.jsx)("li",{children:(null===(h=f.emailAddressList)||void 0===h?void 0:h.length)>0?(0,t.jsx)(c,{isOptionsOpen:O,emailAddressesList:f.emailAddressList}):null})})})]}):null,(null===(x=f.phoneNumberList)||void 0===x?void 0:x.length)>0?(0,t.jsxs)("div",{className:"contact-part",children:[(0,t.jsxs)("div",{className:"type-title",children:[(0,t.jsx)("i",{className:"fa fa-phone"}),(0,t.jsx)("span",{className:"contact-type-title",children:"Phone Number"})]}),(0,t.jsx)("div",{className:"contact-type-list",children:(0,t.jsx)("ul",{className:"number-list",children:(0,t.jsx)("li",{children:(null===(v=f.phoneNumberList)||void 0===v?void 0:v.length)>0?(0,t.jsx)(o,{isOptionsOpen:O,phoneNumberList:f.phoneNumberList}):null})})})]}):null]})]})]})]}),(0,t.jsxs)("div",{className:"customer-details",children:[(0,t.jsx)("div",{className:"email-address",children:(null===(y=f.emailAddressList)||void 0===y?void 0:y.length)>0?(0,t.jsx)(c,{showEmailDropdown:H,setShowEmailDropdown:G,emailAddressesList:f.emailAddressList}):null}),(0,t.jsx)("div",{className:"contact-number",children:(null===(b=f.phoneNumberList)||void 0===b?void 0:b.length)>0?(0,t.jsx)(o,{showPhoneDropdown:R,setShowPhoneDropdown:U,phoneNumberList:f.phoneNumberList}):null}),(0,t.jsxs)("div",{className:"customer-type",children:[(0,t.jsx)("span",{className:`customer-type-icon ${z(f.type)}`}),(0,t.jsx)("span",{className:`type-value ${z(f.type)}`,children:f.type})]})]})]})}),(0,t.jsx)(N,{cloneRef:E,isSupplier:w,onGetContactList:I,isEditablePage:S,getCompletionCount:T,SecurityKey:P})]})}))},67724:(e,s,i)=>{i.d(s,{A:()=>l});i(27565);var n=i(85097),a=i(27929);const l=e=>{let{isApprovalValidate:s,showModal:i,handleToggleModal:l,children:t,...c}=e;return(0,a.jsxs)(n.A,{className:`center-model-popup ${c.modelSizeClass}`,show:i,onHide:l,keyboard:!s,backdrop:!s||"static",children:[(0,a.jsx)(n.A.Header,{closeButton:!s,children:(0,a.jsx)("div",{className:"model-title",children:c.modalTitle})}),(0,a.jsx)(n.A.Body,{children:t})]})}},55795:(e,s,i)=>{i.d(s,{A:()=>a});var n=i(65748);const a=(e,s)=>{navigator.clipboard.writeText(e).then((()=>{n.A.success(`${s} copied to the clipboard.`)}),(e=>{n.A.err("Could not copy text: ",e)}))}}}]);
//# sourceMappingURL=7164.4e2d57ef.chunk.js.map